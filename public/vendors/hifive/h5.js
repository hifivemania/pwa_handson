/* Copyright (C) 2012-2017 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.3.1 gitCommitId 43323340b2cc7d448d98c56f4effca844c74315c (scopedglobals,util,async,cls,event,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){function p(a,c,n){var m=null,v=va[a],q=Ta[a];q&&(m=q(a,v,c,n));!m&&v&&(m=g.u.str.format.apply(null,[v].concat(c)));m&&(m+="(code\x3d"+a+")");c=m?Error(m):Error("FwError: code \x3d "+a);a&&(c.code=a);n&&(c.detail=n);throw c;}function Ua(a){for(var c in a)a.hasOwnProperty(c)&&(va[c]=a[c])}function ia(a,c,n){var m=null,v=va[a];v&&(c=[v].concat(c),m=g.u.str.format.apply(null,c));return{code:a,message:m,detail:n}}function O(a){return null==a?a:F(a)?a:[a]}function y(a){return"string"===typeof a}
function wa(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function Ba(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function ra(a){return y(a)?!!a.match(/^[A-Za-z_\$][\w|\$]*$/):!1}function xa(e){if("regexp"===a.type(e))return e;var c="",c=-1!==e.indexOf("*")?a.map(e.split("*"),function(a){return a.replace(/\W/g,"\\$\x26")}).join(".*"):e;return new RegExp("^"+c+"$")}function Ea(a,c,n){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(c,n):a[c](n))}function pa(e,c,n,m){return e[a.hasOwnProperty("curCSS")?
"pipe":"then"](c,n,m)}function $a(a){return a&&a.document&&9===a.document.nodeType&&ea(a.document)===a}function V(a){return"undefined"===typeof a.nodeType?$a(a)?a.document:null:9===a.nodeType?a:a.ownerDocument}function ea(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ha(e,c,n,m){function v(d){return function(){if(!p._rejected){var l=g.u.obj.argsToArray(arguments),f=a.inArray(d,e);z[f]=2>l.length?l[0]:l;++p._resolveCount===p._promisesLength&&p._doneCallbackExecuter()}}}
var q=e?e.length:0,r=g.async.isPromise,p=this,z=null;this._doneCallbackExecuter=function(){p._resolved=!0;c&&(z?c.call(this,z):c.apply(this,arguments))};this._failCallbackExecuter=function(){p._rejected=!0;n?n.apply(this,arguments):m&&g.settings.commonFailHandler&&g.settings.commonFailHandler.call(this,arguments)};if(1===q||r(e)){var b=1===q?e[0]:e;r(b)?(this.remove=function(a){this._resolved||this._rejected||b===a&&this._doneCallbackExecuter()},b.done(this._doneCallbackExecuter),b.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var q=[],h=0,A=e.length;h<A;h++){var k=e[h];r(k)&&q.push(k)}r=q.length;if(0===r)this._resolved=!0,c&&c();else for(this._promises=q,z=[],this._resolveArgs=[],this._resolveCount=0,this._promisesLength=r,h=0;h<r;h++)A=q[h],A.done(v(A)).fail(this._failCallbackExecuter)}}function ka(a,c,n,m){return new Ha(a,c,n,m)}var Ia=void 0;if(window.h5){if(window.h5.env&&"1.3.1"===window.h5.env.version)return;Ia=window.h5}var g={};window.h5=g;g.coexist=function(){window.h5=Ia;
return g};g.env={version:"1.3.1"};var va={},Ta={},ja=function(){var a=null,c=null,n=null;return function(m){a||(a=document.createElement("a"));null===n&&(a.setAttribute("href","./"),n="./"!==a.href);if(n)return a.setAttribute("href",m),a.href;c||(c=document.createElement("span"));c.innerHTML='\x3ca href\x3d"'+m+'" /\x3e';return c.firstChild.href}}(),F=Array.isArray||function(){var a=Object.prototype.toString;return function(c){return"[object Array]"===a.call(c)}}(),H=function(){if("function"===typeof RegExp()){var a=
Object.prototype.toString;return function(c){return"[object Function]"===a.call(c)}}return function(a){return"function"===typeof a}}();Ha.prototype=a.extend(Ha.prototype,{remove:function(e){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var c=a.inArray(e,this._promises);-1!==c&&(this._promises.splice(c,1),this._resolveArgs.splice(c,1),Ba(e)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});
var fa={core:{controllerInternal:null}};(function(){function e(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case "undefined":return"u";case "undefElem":return"_";case "objElem":return"@"}}function c(a,
d){if(y(a)){var b=a;d&&(b=b.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return b=b.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(c(a.toString())):a}function n(a,d){return"1"===d?a:y(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(n(a.toString())):
a}function m(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function v(a,d,b){var h=g.async.deferred();g.ajax({url:a,async:d,cache:b,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=z(arguments);a.push(this.url);h.notifyWith(h,a);h.resolveWith(h,a)}).fail(function(){h.rejectWith(h,z(arguments))});return h.promise()}function q(a){y(a)||p(11E3,"h5.u.obj.ns()");a=a.split(".");for(var d=a.length,b=0;b<d;b++)ra(a[b])||p(11E3,"h5.u.obj.ns()");for(var h=window,
b=0;b<d;b++){var k=a[b];"undefined"===typeof h[k]&&(h[k]={});h=h[k]}return h}function r(a,d){var b=q(a),h;for(h in d)d.hasOwnProperty(h)&&(void 0!==b[h]&&p(11001,[a,h]),b[h]=d[h])}function B(d){return d&&d.jquery?d.jquery===a().jquery:!1}function z(a){return Array.prototype.slice.call(a)}function b(a,d){y(a)||p(11E3,"h5.u.obj.getByPath()");a=a.replace(/\[(\d+)\]/g,function(a,d,f){return f?"."+d:d});var b=a.split("."),h=0;"window"!==b[0]||d&&d!==window||(h=1);for(var k=d||window,e=b.length;h<e&&(k=
k[b[h]],null!=k);h++);return k}var h={},A={"\x26":"\x26amp;",'"':"\x26quot;","\x3c":"\x26lt;","\x3e":"\x26gt;","'":"\x26#39;"},k=void 0!==document.createElement("script").onload,d=-1===/\r\n/.toString().indexOf("\r\n");r("h5.u",{loadScript:function(d,f){var b=g.async.deferred,e=O(d);e&&0!==e.length||p(11007);for(var c=0,m=e.length;c<m;c++)d=e[c],y(d)&&a.trim(d)||p(11007);null==f||a.isPlainObject(f)||p(11008,"h5.u.loadScript()");var n=f&&!1===f.async?!1:!0,r=!(!f||!0!==f.force),c=!(!f||!0!==f.parallel),
q=!(!f||!0!==f.atomic),A=!r,u=n?b():null,C=n?function(a){u.reject(ia(11010,[a]))}:null,m=n?function(){var a=b();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,la=c?[]:null,da=[],K={};if(n){if(!q&&k){var B=a("head"),R=function(a){var d=b(),f=document.createElement("script");f.onload=function(){f.onload=null;h[a]=a;d.resolve()};f.onerror=function(){f.onerror=null;d.reject(a)};f.type="text/javascript";f.src=A?a:a+(-1<a.indexOf("?")?"\x26_":"?_")+ +new Date;B[0].appendChild(f);return d.promise()};
if(c)la.push(m()),a.each(e,function(){var a=ja(this.toString());if(!r&&a in h)return!0;la.push(R(a))}),ka(la,function(){u.resolve()},C);else{var U=pa(b().resolve(),m);a.each(e,function(){var a=ja(this.toString());U=pa(U,function(){if(r||!(a in h))return R(a)},C)});pa(U,function(){u.resolve()},C)}}else if(c){var T=[];la.push(m());T.push(null);a.each(e,function(){var a=ja(this.toString());if(!r&&(a in h||a in K))return!0;la.push(v(a,n,A));q?K[a]=a:T.push(null)});c=e=null;q?(e=function(){a.each(z(arguments),
function(d,f){a.globalEval(f[0])});a.extend(h,K);u.resolve()},c=a.noop):(e=function(){u.resolve()},c=function(){for(var d=z(arguments),f=0;f<T.length;f++)if(d[f]){var b=d[f][3];T[f]!==b&&(a.globalEval(d[f][0]),T.splice(f,1,b))}});g.async.when(la).done(e).fail(C).progress(c)}else U=pa(b().resolve(),m),a.each(e,function(){var d=ja(this.toString());U=pa(U,function(){var f=b();!r&&(d in h||d in K)?f.resolve():v(d,n,A).done(function(b,l,k){q?(da.push(b),K[d]=d):(a.globalEval(b),h[d]=d);f.resolve()}).fail(function(){f.reject(this.url)});
return f.promise()},C)}),pa(U,function(){q&&(a.each(da,function(d,f){a.globalEval(f)}),a.extend(h,K));u.resolve()},C);return u.promise()}a.each(e,function(){var d=ja(this.toString());if(!r&&(d in h||d in K))return!0;v(d,n,A).done(function(f,b,l){q?(da.push(f),K[d]=d):(a.globalEval(f),h[d]=d)}).fail(function(){p(11010,[d])})});q&&(a.each(da,function(d,f){a.globalEval(f)}),a.extend(h,K))},createInterceptor:function(a,d){return function(b){var h={},k=a?a.call(this,b,h):b.proceed();b.result=k;if(!d)return k;
if(k&&H(k.promise)&&!B(k)){var e=this;Ea(k,"always",function(){d.call(e,b,h)});return k}d.call(this,b,h);return k}}});r("h5.u.str",{startsWith:function(a,d){return 0===a.lastIndexOf(d,0)},endsWith:function(a,d){var b=a.length-d.length;return 0<=b&&a.lastIndexOf(d)===b},format:function(a,d){if(null==a)return"";var h=z(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,d){if(/^\d+$/.test(d)){var f=h[parseInt(d,10)];return"undefined"===typeof f?"undefined":f}f=/^\d+[\.|\[]/.test(d)?d:"0."+
d;f=b(f,h);return"undefined"===typeof f?"undefined":f})},escapeHtml:function(d){return"string"!==a.type(d)?d:d.replace(/[&"'<>]/g,function(a){return A[a]})}});r("h5.u.obj",{expose:r,ns:q,serialize:function(b){function f(a){for(var d=0,f=n.length;d<f;d++)if(a===n[d])return!0;return!1}function h(a){for(var d=0,f=n.length;d<f;d++)a===n[d]&&n.splice(d,1)}function k(b){var l=b,g=a.type(b);"object"===typeof b&&(b instanceof String?g="String":b instanceof Number?g="Number":b instanceof Boolean&&(g="Boolean"));
switch(g){case "String":case "string":l=e(g)+c(l);break;case "Boolean":l=l.valueOf();case "boolean":l=e(g)+(l?1:0);break;case "Number":l=l.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))l=Infinity===b.valueOf()?e("infinity"):-Infinity===b.valueOf()?e("-infinity"):e("nan");l=e(g)+l;break;case "number":l=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?e("infinity"):-Infinity===b?e("-infinity"):e("nan"):e(g)+l;break;case "regexp":l=e(g)+c(l.toString(),d);break;case "date":l=
e(g)+ +l;break;case "array":f(b)&&p(ERR_CODE_REFERENCE_CYCLE);n.push(b);for(var z=[],l=e(g)+"[",g=0,r=b.length;g<r;g++){z[g.toString()]=!0;var u;u=b.hasOwnProperty(g)?"function"===a.type(b[g])?e("undefined"):m(k(b[g])):e("undefElem");l+='"'+u+'"';g!==b.length-1&&(l+=",")}var g="",q;for(q in b)z[q]||"function"!==a.type(b[q])&&(g+='"'+m(c(q))+'":"'+m(k(b[q]))+'",');g&&(l+=(b.length?",":"")+'"'+e("objElem")+"{"+m(g),l=l.replace(/,$/,""),l+='}"');l+="]";h(b);break;case "object":f(b)&&p(11005);n.push(b);
l=e(g)+"{";for(q in b)b.hasOwnProperty(q)&&"function"!==a.type(b[q])&&(l+='"'+m(c(q))+'":"'+m(k(b[q]))+'",');l=l.replace(/,$/,"");l+="}";h(b);break;case "null":case "undefined":l=e(g)}return l}H(b)&&p(11002);var n=[];return"2|"+k(b)},deserialize:function(d){function b(d){function l(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";
case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return"undefined";case "_":return"undefElem";case "@":return"objElem"}}d.match(/^(.)(.*)/);d=RegExp.$1;m=RegExp.$2?RegExp.$2:"";if(void 0!==d&&""!==d)switch(l(d)){case "String":m=new String(n(m,h));break;case "string":break;case "Boolean":"0"===m||"1"===m?m=new Boolean("1"===m):p(11006);break;case "boolean":"0"===m||"1"===m?m="1"===m:p(11006);break;case "nan":""!==m&&p(11006);
m=NaN;break;case "infinity":""!==m&&p(11006);m=Infinity;break;case "-infinity":""!==m&&p(11006);m=-Infinity;break;case "Number":"infinity"===l(m)?m=new Number(Infinity):"-infinity"===l(m)?m=new Number(-Infinity):"nan"===l(m)?m=new Number(NaN):(m=new Number(m),isNaN(m.valueOf())&&p(11006));break;case "number":m=(new Number(m)).valueOf();isNaN(m)&&p(11006);break;case "array":var k;try{k=a.parseJSON(m)}catch(c){p(11006)}F(k)||p(11006);for(var m=[],g=0,q=k.length;g<q;g++)switch(l(k[g].substring(0,1))){case "undefElem":m[g]=
void 0;delete m[g];break;case "objElem":d=b(e("object")+k[g].substring(1));for(var z in d)m[n(z)]=d[z];break;default:m[g]=b(k[g])}break;case "object":try{k=a.parseJSON(m)}catch(c){p(11006)}a.isPlainObject(k)||p(11006);m={};for(z in k)d=b(k[z]),m[n(z)]=d;break;case "date":m=new Date(parseInt(m,10));break;case "regexp":try{g=m.match(/^\/(.*)\/(.*)$/),q=n(g[1],h),m=new RegExp(q,g[2])}catch(c){p(11006)}break;case "null":""!==m&&p(11006);m=null;break;case "undefined":""!==m&&p(11006);m=void 0;break;default:p(11004)}return n(m,
h)}y(d)||p(11009);d.match(/^(.)\|(.*)/);var h=RegExp.$1;"1"!==h&&"2"!==h&&p(11003,[h,"2"]);return b(RegExp.$2)},isJQueryObject:B,argsToArray:z,getByPath:b})})();(function(){function e(a,e){a.target||(a.target=e);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var c=!1;a.isDefaultPrevented=function(){return c};a.preventDefault=function(){c=!0}}if(!a.isImmediatePropagationStopped){var n=!1;a.isImmediatePropagationStopped=function(){return n};a.stopImmediatePropagation=function(){n=
!0}}}function c(a){var e={},c;for(c in a){var n=a[c];a.hasOwnProperty(c)&&(H(n)||null===n||"string"===typeof n||"number"===typeof n||"boolean"===typeof n)&&(e[c]=n)}this._mix=function(a){for(var c in e)a[c]=e[c]};this._hasInterface=function(a){for(var c in e)if(!g.u.str.startsWith(c,"_")&&"undefined"===typeof a[c])return!1;return!0}}function n(a){return new c(a)}a.extend(c.prototype,{mix:function(a){return this._mix(a)},hasInterface:function(a){return this._hasInterface(a)}});g.u.obj.expose("h5.mixin",
{createMixin:n,eventDispatcher:n({hasEventListener:function(a,e){if(!this._eventListeners)return!1;var c=this._eventListeners[a];if(!c||!this._eventListeners.hasOwnProperty(a))return!1;for(var n=0,g=c.length;n<g;n++)if(c[n]===e)return!0;return!1},addEventListener:function(a,e){(2>arguments.length||!y(a))&&p(16E3);null==e||this.hasEventListener(a,e)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||(this._eventListeners[a]=[]),this._eventListeners[a].push(e))},
removeEventListener:function(a,e){if(this.hasEventListener(a,e))for(var c=this._eventListeners[a],n=0,g=c.length;n<g;n++)if(c[n]===e){c.splice(n,1);break}},dispatchEvent:function(a){if(this._eventListeners){var c=this._eventListeners[a.type];if(c){c=c.slice(0);e(a,this);for(var n=0,g=c.length;n<g&&!a.isImmediatePropagationStopped();n++)H(c[n])?c[n].call(a.target,a):c[n].handleEvent&&c[n].handleEvent(a);return a.isDefaultPrevented()}}}})})})();(function(){function e(a){return a.match(/^error$/i)?r.ERROR:
a.match(/^warn$/i)?r.WARN:a.match(/^info$/i)?r.INFO:a.match(/^debug$/i)?r.DEBUG:a.match(/^trace$/i)?r.TRACE:a.match(/^all$/i)?r.ALL:a.match(/^none$/i)?r.NONE:null}function c(a,b){var h={},c=a.slice(0,b),k=Math.min(3,b),d=c.slice(0,k).join(" \x3c- ");c.length>k&&(d+=" ...");h.preview=d;h.all=c.join("\n");return h}function n(a){a.name?a=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),a=RegExp.$1);return a}function m(c){c=g.u.obj.argsToArray(c);for(var b=[],h=0,e=c.length;h<e;h++)b.push(a.type(c[h]));
return b.join(", ")}function v(){}function q(c){y(c)&&0!==a.trim(c).length||p(10005);this.category=a.trim(c)}var r={ERROR:50,WARN:40,INFO:30,DEBUG:20,TRACE:10,ALL:0,NONE:-1},B=null;v.prototype={init:function(a){},log:function(a){window.console&&(y(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,b=1===b.length?b[0]:g.u.str.format.apply(g.u.str,b),b=this._getLogPrefix(a)+b;a.logger.enableStackTrace&&(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?
console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var h=!1;a==r.ERROR&&console.error?(console.error(b),h=!0):a==r.WARN&&console.warn?(console.warn(b),h=!0):a==r.INFO&&console.info?(console.info(b),h=!0):a==r.DEBUG&&console.debug&&(console.debug(b),h=!0);!h&&console.log&&console.log(b)},_getLogPrefix:function(a){return"["+a.levelString+
"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,h=this._getLogPrefix(a);b.unshift(h);a.level==r.ERROR&&console.error?this._output(console.error,b):a.level==r.WARN&&console.warn?this._output(console.warn,b):a.level==r.INFO&&console.info?this._output(console.info,b):a.level==r.DEBUG&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,b);
return}}catch(h){}a(b)}};q.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(r.ERROR,arguments,this.error)},warn:function(a){this._log(r.WARN,arguments,this.warn)},info:function(a){this._log(r.INFO,arguments,this.info)},debug:function(a){this._log(r.DEBUG,arguments,this.debug)},trace:function(a){this._log(r.TRACE,arguments,this.trace)},_traceFunctionName:function(e){var b=[],h=Error();if(h=h.stack||h.stacktrace)var g=/_traceFunctionName/,b=h.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),k=null,d=null,b=a.map(b,function(b,f){if(0===b.length)return null==d?"":null;k=""===a.trim(b)?"{anonymous}":a.trim(b);null===d&&g.test(b)&&(d=f);return k}).slice(d+3);else{e=e.caller;for(var h=0,l=this.maxStackSize;h<l;h++){var f=n(e),D=m(e.arguments),P;try{P=e.caller}catch(q){b.push("{unable to trace}");break}f?b.push("{"+f+"}("+D+")"):P?b.push("{anonymous}("+D+")"):b.push("{root}("+D+")");if(!P)break;e=P}}return c(b,this.maxStackSize)},
_log:function(a,b,h){b={level:a,args:g.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(h):""};var c=B.out,k=B.defaultOut;h=[];var d=!1;if(c)for(var c=O(c),l=0,f=c.length;l<f;l++){var e=c[l];if(e.compiledCategory.test(this.category)&&a>=e.compiledLevel&&0<=e.compiledLevel&&(h.push(e),!1!==e.terminate)){d=!0;break}}h.length&&d||h.push(k);l=0;for(c=h.length;l<c;l++){k=h[l];f=k.compiledLevel;k=k.compiledTargets;if(a<f||0>f)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!k||0===k.length)break;d=0;for(f=k.length;d<f;d++)k[d].log(b)}},_levelToString:function(a){if(a===r.ERROR)return"ERROR";if(a===r.WARN)return"WARN";if(a===r.INFO)return"INFO";if(a===r.DEBUG)return"DEBUG";if(a===r.TRACE)return"TRACE"}};g.u.obj.expose("h5.log",{createLogger:function(a){return new q(a)},configure:function(){function c(d,f,h){if(!h){var l=f.category;y(l)&&0!==a.trim(l).length||p(10010);l=a.trim(l);f.compiledCategory=xa(l);k.push(l)}h=null==f.level?e(h?b.level:
n.level):y(f.level)?e(a.trim(f.level)):f.level;"number"!==typeof h&&p(10003,f.level);f.compiledLevel=h;h=[];l=f.targets;if(null!=l){var m=[];null==l||F(l)||y(l)&&a.trim(l).length||p(10008);for(var l=O(l),g=0,D=l.length;g<D;g++){null==l[g]||y(l[g])&&a.trim(l[g]).length||p(10008);var u=l[g];if(u){-1!==a.inArray(u,m)&&p(10007,u);var q=d[u];q||p(10004,u);m.push(u);h.push(q.compiledTarget)}}}f.compiledTargets=h}var b={level:"NONE",targets:null},h=a.extend(!0,{},g.settings.log),n=h.defaultOut;n||(n=b,h.defaultOut=
n);var k=[],d=h.target;d||(d={},h.target=d);(function(d){a.isPlainObject(d)||p(10009);for(var b in d){var f=d[b];"object"!==a.type(f.type)&&"console"!==f.type&&p(1E4);var l;l="console"===f.type?new v:a.extend(!0,{},f.type);l.init&&l.init(f);f.compiledTarget=l}d.console={type:"console",compiledTarget:new v}})(d);c(d,n,!0);var l=h.out;if(l)for(var l=O(l),f=0,m=l.length;f<m;f++)c(d,l[f]);B=h}})})();(function(){function e(c){g.settings.aspects=a.map(O(c),function(a){a.target&&(a.compiledTarget=xa(a.target));
a.pointCut&&(a.compiledPointCut=xa(a.pointCut));return a})}g.u.obj.ns("h5.settings");g.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a,c,e){a=a.status;if("POST"===this.type||0!==a&&12029!==a)return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",
urlMaxLength:1800,baseUrl:null,autoInit:!1}};var c=g.u.createInterceptor(function(a,c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time\x3d{2}ms",this.__name,a.funcName,e)});g.u.obj.expose("h5.core.interceptor",{lapInterceptor:c,logInterceptor:c,errorInterceptor:function(a){var c=null;try{c=a.proceed()}catch(e){g.settings.commonFailHandler&&
H(g.settings.commonFailHandler)&&g.settings.commonFailHandler.call(null,e)}return c}});a(document).trigger("h5preinit");g.settings.aspects&&e(g.settings.aspects);g.log.configure()})();(function(){g.u.obj.expose("h5.env",{ua:function(e){function c(a,d){var b=X(a,"[^;)]*",d).split(" ");return 1===b.length?"":b[b.length-1]}function n(a,d){var b=X(a,"[^;) ]*",d).split("/");return 1===b.length?"":b[b.length-1]}function g(a,d){var b=X(a,"[^;) ]*",d).split(":");return 1===b.length?"":b[b.length-1]}var p=
!!e.match(/iPhone/i),q=!!e.match(/iPad/i),r=p||q,B=!!e.match(/android/i),z=!!e.match(/Windows Phone/i),b=!!e.match(/Edge/),h=!!e.match(/MSIE/)||!!e.match(/Trident/),A=!!e.match(/Firefox/i),k=!b&&!!e.match(/Chrome/i)||!!e.match(/CrMo/)||!!e.match(/CriOS/),d=!b&&!B&&!k&&!!e.match(/Safari/i),l=!b&&!!e.match(/Webkit/i),f=!!e.match(/Opera/i),D=B&&!!e.match(/Safari/i)&&!k,P=!!(p||z||D&&e.match(/Mobile/)&&!e.match(/SC-01C/)||B&&k&&e.match(/Mobile/)||e.match(/Fennec/i)||e.match(/Opera Mobi/i)),Q=!!(q||D&&
!e.match(/Mobile/)||B&&k&&!e.match(/Mobile/)||e.match(/SC-01C/)||e.match(/Fennec/i)||e.match(/Opera Tablet/i)),W=!P&&!Q,na=null,J=null,M=function(d,b){return a.trim(e.substring(e.indexOf(d)+d.length,e.indexOf(b))).split("_")},X=function(d,b,f){return a.trim(e.match(!1===f?new RegExp(d+b):new RegExp(d+b,"i")))};p?(J=M("iPhone OS","like"),na=parseInt(J[0]),J=J.join(".")):q?(J=M("CPU OS","like"),na=parseInt(J[0]),J=J.join(".")):B&&A||(B?(J=c("Android"),na=parseInt(J.split(".")[0])):z&&((J=c("Windows Phone OS"))||
(J=c("Windows Phone")),na=parseInt(J.split(".")[0])));h&&f&&(h=!1);var u=M=null;if(r||B&&D)M=na,u=J;else{var C=null;h?C=c("MSIE",!1)||g("rv"):k?(C=n("Chrome",!1))||(C=n("CrMo",!1)):d?C=n("Version"):A?C=n("Firefox"):f?((C=n("Version"))||(C=n("Opera")),C||(C=c("Opera"))):b&&(C=n("Edge"));C&&(M=parseInt(C.split(".")[0]),u=C)}return{osVersion:na,osVersionFull:J,browserVersion:M,browserVersionFull:u,isiPhone:p,isiPad:q,isiOS:r,isAndroid:B,isWindowsPhone:z,isIE:h,isFirefox:A,isChrome:k,isSafari:d,isOpera:f,
isEdge:b,isAndroidDefaultBrowser:D,isSmartPhone:P,isTablet:Q,isDesktop:W,isWebkit:l}}(navigator.userAgent)})})();(function(){function e(a){function b(){k=!0;d=this;l=r(arguments);if(wa(a)||Ba(a))return a;var c=r(arguments);if(0<f.length)for(var e=0,n=f.length;e<n;e++){var g=c;g!==arguments&&(g=O(g));H(f[e])&&f[e].apply(this,g)}return a}var k=!1,d=null,l=null,f=[];a.progress=function(){for(var b=r(arguments),c=0,e=b.length;c<e;c++){var n=b[c];if(F(n))a.progress.apply(this,n);else if(H(n))if(k){var g=
l;g!==l&&(g=O(g));n.apply(d,g)}else f.push(n)}return this};a.notify=b;a.notifyWith=function(a,d){return d?b.apply(a,d):b.apply(a)}}function c(a){if(!a)return!1;a=O(a);for(var b=0,c=a.length;b<c;b++)if(H(a[b]))return!0;return!1}function n(h,p){function k(a){p?p[a]&&(h[a]=p[a]):(P[a]=h[a],h[a]=function(d){return function(){if(!f){var d=r(arguments);if("then"===a||"pipe"===a)d=d[1];c(d)&&(f=!0)}return h._h5UnwrappedCall.call(this,a,r(arguments))}}(a),Q[a]=h[a])}function d(a){return function(){var d=
g.settings.commonFailHandler;f||!d||D||(h.fail.call(this,d),D=!0);return a.apply(this,arguments)}}if(h._h5UnwrappedCall)return h;var l=!!h.progress;l||b(h)?p&&(h.progress=p.progress):e(h);var f=!1,D=!1,P={},Q={};h._h5UnwrappedCall=p?p._h5UnwrappedCall:function(d,b){b=O(b);a.extend(h,P);var f=h[d].apply(this,b);a.extend(h,Q);return f};for(var W=0,z=m.length;W<z;W++){var J=m[W];h[J]&&k(J)}h.pipe&&!p&&(h.pipe=function(){for(var a=g.async.deferred(),d=r(arguments),b=0,f=v.length;b<f;b++){var l=this;(function(d,
b,f){function h(){if(c){var b=d.apply(this,arguments);if(b&&H(b.promise))n(b),b.done(a.resolve),b._h5UnwrappedCall("fail",a.reject),H(b.progress)&&b.progress(a.notify);else a[f+"With"](this,[b])}else a[f+"With"](this,arguments)}var c=H(d);if(c||"fail"!==b)l[b](h);else l._h5UnwrappedCall(b,h)})(d[b],v[b],q[b])}return a.promise()},Q.pipe=h.pipe);if(h.then&&!p){var M=h.then;h.then=B?h.pipe:function(){var a=arguments,d=M.apply(this,a);!l&&c(a[2])&&h.progress.call(h,a[2]);return d};Q.then=h.then}h.reject&&
(h.reject=p&&p.reject?p.reject:d(h.reject));h.rejectWith&&(h.rejectWith=p&&p.rejectWith?p.rejectWith:d(h.rejectWith));if(h.promise)if(p&&p.promise)h.promise=p.promise;else{var X=h.promise;h.promise=function(){return n(X.apply(this,arguments),h)}}return h}var m=["fail","always","pipe","then"],v=["done","fail","progress"],q=["resolve","reject","notify"],r=g.u.obj.argsToArray,B=function(){var b=a.Deferred();return b!==b.then()}(),z=function(){var b=a.Deferred();return n(b)},b=function(a){return!!a&&
a.done&&a.fail&&!a.resolve&&!a.reject};g.u.obj.expose("h5.async",{deferred:z,when:function(){var b=r(arguments);1===b.length&&F(b[0])&&(b=b[0]);var c=b.length,k=g.async.deferred(),d=k.promise(),l=a.when.apply(a,b).done(function(){k.resolveWith(this&&this.promise&&this.promise()===l?k:this,r(arguments))}).fail(function(){k.rejectWith(this,r(arguments))});if(l.progress)l.progress(function(){k.notifyWith(this===l?d:this,r(arguments))});else{for(var f=function(a){return function(b){e[a]=1<arguments.length?
r(arguments):b;k.notifyWith(d,e)}},e=[],n=0;n<c;n++)e[n]=void 0;for(n=0;n<c;n++){var m=b[n];m&&H(m.promise)&&m.progress&&(1<c?m.progress(f(n)):m.progress(function(){k.notifyWith(d,r(arguments))}))}}return d},isPromise:b,loop:function(c,e,k){F(c)||p(5E3);var d=z(),l="number"===a.type(k)?k:20,f=0,n=c.length,g,m=null,q=function(){if(f===n)d.resolve(c);else{var a=e.call(c,f,c[f],m);f++;b(a)?a.done(function(){g()}).fail(function(){d.reject(c)}):g()}},r=function(){setTimeout(function(){var a=f-1;0<f&&d.notify({data:c,
index:a,value:c[a]});q()},0)},v=!1;g=function(){v||(0===f%l?r():q())};var B=!1,m={resume:function(){!B&&v&&(v=!1,g())},pause:function(){v=!0},stop:function(){B=!0;d.resolve(c)}};r();return d.promise()}})})();(function(){function e(a,c){for(var e=0,b=p.length;e<b;e++){var h=p[e];a[h]&&(c[q[h]](a[h]),a[h]=void 0)}}function c(c,e,n){for(var b in e)!e.hasOwnProperty(b)||!n&&H(e[b])||-1!==a.inArray(b,m)||(c[b]=e[b])}function n(a,e){c(this,a,!0);e.promise(this);var n=this.always;this.always=function(){n.apply(this,
arguments);return this}}var m=["error","success","complete"],p=["error","success","complete"],q={success:"done",error:"fail",complete:"always"};g.u.obj.expose("h5",{ajax:function(){function m(a,d,b){c(v,b);h.resolveWith(this,arguments)}function q(b,d,l){if(0===p.retryCount||!1===p.retryFilter.apply(this,arguments))c(v,b),h.rejectWith(this,arguments);else if(p.retryCount--,this.async){var f=this;setTimeout(function(){a.ajax(f).done(m).fail(q)},p.retryInterval)}else a.ajax(this).done(m).fail(q)}var p=
{},b=arguments;y(b[0])?(a.extend(p,b[1]),p.url=b[0]):a.extend(p,b[0]);var p=a.extend({},g.settings.ajax,p),h=g.async.deferred();e(p,h);var b=a.ajax(p),v=new n(b,h);b.done(m).fail(q);return v}})})();(function(){function e(a,b){var f=b.getParentClass();f&&e(a,f);var c=b.getDescriptor(),h=c.field;if(h)for(var k in h){var n=h[k],f=null;n&&void 0!==n.defaultValue&&(f=n.defaultValue);a[k]=f}if(k=c.accessor)for(var g in k)c=k[g],f=null,c&&void 0!==c.defaultValue&&(f=c.defaultValue),null==c&&Object.defineProperty(a,
"_p_"+g,{writable:!0,configurable:!1,enumerable:!1,value:f})}function c(a){b.forEach(function(b){if(a===b)throw Error(g.u.str.format('静的メンバーの名前 "{0}" は使用できません。',a));})}function n(a,b,f){if(!f||!f.name)throw Error("classDescritporがない、またはnameがありません。");if(!f.method||!f.method.constructor)throw Error("classDescritporのメソッド定義にconstructor定義がありません。");var c=f.method.constructor;b&&(c.prototype=Object.create(b._ctor.prototype),c.prototype.constructor=c);var e={constructor:function(){for(var a=arguments.length,
d=Array(a),b=0;b<a;b++)d[b]=arguments[b];return c.apply(this,d)}},k=new B(a,f,c,b,e);c.prototype.__name=f.name;c.prototype._class=k;var h=[{descriptor:f,ctor:c}],n={};if(b){do{h.unshift({descriptor:b._descriptor,ctor:b._ctor});for(var q in b._descriptor.field||{})n[q]="field";for(q in b._descriptor.accessor||{})n[q]="accessor";for(q in b._descriptor.method||{})"constructor"!==q&&(n[q]="method")}while(b=b._parentClass)}b=f.field;var p=f.accessor,r=f.method;for(q in r)if("constructor"!==q){var u=r[q];
if("function"!==typeof u)throw Error("クラスディスクリプタのmethodには、関数以外は指定できません。メソッド\x3d"+f.name+"."+q);if("string"===typeof n[q]&&"method"!==n[q]||b&&q in b||p&&q in p)throw Error(g.u.str.format('メンバーの名前 "{0}" が重複しています。',q));c.prototype[q]=u}if(b)for(var v in b)if("string"===typeof n[v]&&"field"!==n[v]||p&&v in p||v in r)throw Error(g.u.str.format('メンバーの名前 "{0}" が重複しています。',v));if(p){if("_class"in p)throw Error("親クラスで定義されているプロパティは再定義できません。プロパティ名\x3d_class");for(var A in p){if("string"===typeof n[A]&&"accessor"!==
n[A]||b&&A in b||A in r)throw Error(g.u.str.format('メンバーの名前 "{0}" が重複しています。',A));(q=p[A])?Object.defineProperty(c.prototype,A,{configurable:!1,enumerable:!0,get:q.get,set:q.set}):function(a){Object.defineProperty(c.prototype,a,{configurable:!1,enumerable:!0,get:function(){return this["_p_"+a]},set:function(d){this["_p_"+a]=d}})}(A)}}h.forEach(function(a){if(a.descriptor.method){var d=a.descriptor.method,b;for(b in d)"constructor"!==b&&(e[b]=d[b])}if(a.descriptor.accessor){var d=a.descriptor.accessor,
f;for(f in d){d=f;b={};var c=Object.getOwnPropertyDescriptor(a.ctor.prototype,d);c.get&&(b.get=c.get);c.set&&(b.set=c.set);Object.freeze(b);e[d]=b}}});Object.freeze(e);m(k,f);return a._classMap[f.name]=k}function m(a,b){var f=b.staticField||{},e=b.staticAccessor||{},k=b.staticMethod||{},h=Object.keys(f).concat(Object.keys(e)).concat(Object.keys(k));h.forEach(function(a){c(a)});for(var n=h.length,m=0;m<n-1;m++)for(var A=m+1;A<n;A++)if(h[m]===h[A])throw Error(g.u.str.format('静的メンバーの名前 "{0}" が重複しています。',
h[m]));p(a,f);q(a,e);r(a,k);Object.seal(a.statics)}function p(a,b){Object.keys(b).forEach(function(f){var c=b[f],e=c&&!0===c.isReadOnly;Object.defineProperty(a._ctor,f,{enumerable:!0,configurable:!1,value:c&&"defaultValue"in c?c.defaultValue:null,writable:!e});c={enumerable:!0,configurable:!1,get:function(){return a._ctor[f]}};e||(c.set=function(b){a._ctor[f]=b});Object.defineProperty(a.statics,f,c)})}function q(a,b){Object.keys(b).forEach(function(f){var c=b[f],e={enumerable:!0,configurable:!1};
if(c)e.get=c.get,e.set=c.set;else{var h=null;e.get=function(){return h};e.set=function(a){h=a}}Object.defineProperty(a._ctor,f,e);Object.defineProperty(a.statics,f,e)})}function r(a,b){Object.keys(b).forEach(function(f){var c=b[f];if("function"!==typeof c)throw Error("クラスディスクリプタのmethodには、関数以外は指定できません。メソッド\x3d"+a.getFullName()+"."+f);c={enumerable:!1,configurable:!1,value:c,writable:!1};Object.defineProperty(a._ctor,f,c);Object.defineProperty(a.statics,f,c)})}function B(a,b,f,c,e){this._descriptor=
b;this._ctor=f;this._parentClass=c;this._isCtorChained=!1;this._manager=a;this._superObject=e;Object.defineProperty(this,"statics",{value:{},writable:!1})}function z(){this._rootClass=null;this._classMap={};this._rootClass=n(this,null,h)}var b="length name displayName arguments prototype caller".split(" ").concat(["extend","getClass"]);a.extend(B.prototype,{extend:function(a){var b=a;"function"===typeof a&&(b=a(this._superObject));return n(this._manager,this,b)},create:function(){if(!0===this._descriptor.isAbstract)throw Error("このクラスは抽象クラスです。インスタンスを生成することはできません。");
var a=Object.create(this._ctor.prototype);e(a,this);!0!==this._descriptor.isDynamic&&Object.seal(a);for(var b=arguments.length,f=Array(b),c=0;c<b;c++)f[c]=arguments[c];this._ctor.apply(a,f);if(!1===this._isCtorChained)throw Error("親クラスのコンストラクタ呼び出しが途中で行われていません。継承関係のあるすべてのクラスのコンストラクタの先頭で Foo._super.call(this) のような親コンストラクタの呼び出しが行われていることを確認してください。");return a},getDescriptor:function(){return this._descriptor},getParentClass:function(){return this._parentClass},getFullName:function(){return this._descriptor.name},
isClassOf:function(a){return a instanceof this._ctor},getManager:function(){return this._manager}});var h={name:"h5.cls.RootClass",method:{constructor:function(){this._class._isCtorChained=!0},getClass:function(){return this._class}}};a.extend(z.prototype,{getRootClass:function(){return this._rootClass},getClass:function(a){a=this._classMap[a];return void 0===a?null:a},getNamespaceObject:function(a){if(!a)throw Error("namespaceが指定されていません。");a+=".";var b={},f=this._classMap,c=a.length,e;for(e in f)if(0===
e.lastIndexOf(a,0)&&-1===e.indexOf(".",c)){var h=e.substr(c);b[h]=f[e]}return b}});var A=new z,k=A.getRootClass();g.u.obj.expose("h5.cls",{manager:A,RootClass:k})})();(function(){var a=g.cls.RootClass;a.extend(function(a){return{name:"h5.event.EventDispatcher",field:{_eventListeners:null},method:{constructor:function(){a.constructor.call(this);this._eventListeners={}},hasEventListener:function(a,c){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;
for(var g=0,p=e.length;g<p;g++)if(e[g]===c)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!y(a))&&p(ERR_CODE_INVALID_ARGS_ADDEVENTLISTENER);null==c||this.hasEventListener(a,c)||(this._eventListeners.hasOwnProperty(a)||(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var e=this._eventListeners[a],g=0,p=e.length;g<p;g++)if(e[g]===c){e.splice(g,1);break}},dispatchEvent:function(a){var c=this._eventListeners[a.type];
if(c){c=c.slice(0);a.target||(a.target=this);a.timeStamp||(a.timeStamp=(new Date).getTime());for(var e=0,g=c.length;e<g&&!a.isImmediatePropagationStopped();e++)H(c[e])?c[e].call(a.target,a):c[e].handleEvent&&c[e].handleEvent(a);return a.defaultPrevented}}}}});a.extend(function(a){return{name:"h5.event.Event",field:{target:null,timeStamp:null,_type:null,_defaultPrevented:null,_isImmediatePropagationStopped:null},accessor:{type:{get:function(){return this._type}},defaultPrevented:{get:function(){return this._defaultPrevented}}},
method:{constructor:function(e){a.constructor.call(this);this._type=e;this._isImmediatePropagationStopped=this._defaultPrevented=!1},preventDefault:function(){this._defaultPrevented=!0},isDefaultPrevented:function(){return this._defaultPrevented},stopImmediatePropagation:function(){this._isImmediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this._isImmediatePropagationStopped}}}}).extend(function(a){return{name:"h5.event.PropertyChangeEvent",field:{_propertyName:null,_oldValue:null,
_newValue:null},accessor:{propertyName:{get:function(){return this._propertyName}},oldValue:{get:function(){return this._oldValue}},newValue:{get:function(){return this._newValue}}},method:{constructor:function(e,g,v){a.constructor.call(this,"propertyChange");null==e&&p(90001);this._propertyName=e;this._oldValue=void 0!==g?g:null;this._newValue=void 0!==v?v:null}}}})})();(function(){function e(a,b){this.id=a;this.content=b}function c(a,b,f){this.url=a;this.path=b;this.content=f}function n(a){this._resourceKey=
a}function m(a){function b(a,d){if(0!==d.indexOf("../"))return a+d;d=d.slice(3);a=a.replace(/[^\/]+?\/$/,"");return b(a,d)}var f=g.settings.res.baseUrl;if(a===ja(a)||0===a.indexOf("/"))return a;if(!f)return 0===a.indexOf("./")?a:"./"+a;g.u.str.endsWith(f,"/")||(f+="/");return b(f,a)}function p(a,b,f){void 0===f&&H(a)&&(f=a,a=void 0);r.unshift({type:a,test:b,resolver:f})}var q=g.async.deferred,r=[],B={},z={},b=[],h=null,A={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=
this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var b=a.url;this.cache[b]=a;this.cacheUrls.push(b)},clearCache:function(a,b){var f=ja(a);b||delete this.cache[f];for(var c=0,e=this.cacheUrls.length;c<e;c++)if(this.cacheUrls[c]===f){this.cacheUrls.splice(c,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var b=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return b},loadResourceFromPath:function(a){var b=ja(a);if(this.accessingUrls[b])return this.accessingUrls[b];
var f=q(),e=f.promise();this.accessingUrls[b]=e;var h=this;g.ajax(a,{dataType:"text"}).done(function(e,k,g){delete h.accessingUrls[b];e=new c(b,a,g.responseText);h.append(e);f.resolve(e)}).fail(function(c){delete h.accessingUrls[b];f.reject(ia(17E3,[c.status,b],{url:b,path:a,error:c}))});return e}},k={load:function(a){var b=ja(a);return A.cache[b]?q().resolve(A.getResourceFromCache(b)).promise():A.loadResourceFromPath(a)},clearCache:function(a){A.clearCache(a)},clearAllCache:function(){A.clearAllCache()}};
a.extend(n.prototype,{resolve:function(b){function c(f){for(var e=0,h=r.length;e<h;e++)if(!b||b===r[e].type){var k=r[e].test;if(!b&&k)if("regexp"===a.type(k)){if(!k.test(f))continue}else if(!1===k(f))continue;return r[e].resolver(f,b)}return!1}if(!F(this._resourceKey))return c(this._resourceKey);for(var f=this._resourceKey,e=[],h=0,k=f.length;h<k;h++){var n=c(f[h]);e.push(n)}var m=g.async.deferred();ka(e,function(a){F(a)||(a=[a]);a.unshift(a.slice(0));m.resolveWith(m,a)},function(a){m.reject(a)});
return m.promise()},getKey:function(){return this._resourceKey}});p("namespace",null,function(a){var b=B[a]||g.u.obj.getByPath(a);if(b)return q().resolve(b).promise();if(z[a])return z[a].deferred.promise();var b=m(a.replace(/\./g,"/"))+".js",f=q(),c=g.settings.res.resolveTimeout,e=null;0<c&&(e=setTimeout(function(){z[a]&&(delete z[a],f.reject(ia(17001,[a])))},c));z[a]={deferred:f,timer:e};g.u.loadScript(b).done(function(){var b=B[a]||g.u.obj.getByPath(a);b&&z[a]&&(B[a]=b,delete z[a],clearTimeout(e),
f.resolve(b))}).fail(function(b){clearTimeout(e);delete z[a];f.reject(b)});return f.promise()});p("ejsfile",/.*\.ejs(\?.*$|$)/,function(b){var c=q();k.load(m(b)).done(function(b){var d=a(b.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),h=[];0<d.not('script[type\x3d"text/ejs"]').length?c.reject(ia(7011,null,{url:b.url,path:b.path})):(0===d.length&&c.reject(ia(7001,null,{url:b.url,path:b.path})),d.each(function(){var d=a.trim(this.id);d||c.reject(ia(7002,null,{url:b.url,
path:b.path}));var k=a.trim(this.innerHTML);h.push(new e(d,k))}),c.resolve({url:b.url,path:b.path,templates:h}))}).fail(function(a){var b=a.detail,b=ia(7003,[b.error.status,b.url],b);a.code=b.code;a.message=b.message;a.detail=a.detail;c.reject(a)});return c.promise()});p("jsfile",/.*\.js(\?.*$|$)/,function(a){return g.u.loadScript(m(a))});p("cssfile",/.*\.css(\?.*$|$)/,function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("link");c.type="text/css";c.rel="stylesheet";
c.href=m(a);b.appendChild(c);return q().resolve(c).promise()});g.u.obj.expose("h5.res",{dependsOn:function(a){return new n(a)},isDependency:function(a){return a instanceof n},register:function(a,c,f,e){f&&(e?g.u.obj.expose(e,c):g.u.obj.expose(a,c));B[a]=c;if(f=z[a])delete z[a],a=f.deferred,(f=f.timer)&&clearTimeout(f),b.push({dfd:a,value:c}),h||(h=setTimeout(function(){h=null;for(var a=b.splice(0,b.length),c=0,d=a.length;c<d;c++)a[c].dfd.resolve(a[c].value)},0))},get:function(a){return g.res.dependsOn(a).resolve()}})})();
(function(){function e(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function c(a,b,c,d){if(!Ka){Ka={};a=new Oa(null,"a");for(var t in a)a.hasOwnProperty(t)&&"__name"!==t&&"__templates"!==t&&"__meta"!==t&&(Ka[t]=1);a=Oa.prototype;for(t in a)a.hasOwnProperty(t)&&(Ka[t]=null)}for(var f in c)f in Ka&&p(6011,[d,f],{controllerDefObj:c})}function n(b,c){function d(t,f){-1!==a.inArray(t,f)&&
p(6009,[c],{controllerDefObj:b});k(t,function(a){d(a,f.concat([t]))},!0)}d(b,[])}function m(b){function c(t,f){-1!==a.inArray(t,f)&&p(6010,[b.__name],{logicDefObj:b});d(t,function(a){c(a,f.concat(t))})}c(b,[])}function v(b,c,d){null==b&&p(6001,[d],{controllerDefObj:c});y(b)||"object"===typeof b||p(6030,[d],{controllerDefObj:c});b=a(b);0===b.length&&p(6003,[d],{controllerDefObj:c});1<b.length&&p(6004,[d],{controllerDefObj:c});9!==b[0].nodeType&&1!==b[0].nodeType&&p(6034,[d],{controllerDefObj:c})}function q(a,
b,c,d,t){this.controller=a;this.event=b;this.evArg=c;this.selector=d;this.selectorType=t}function r(a){if(!Fa(this)&&this.__controllerContext.executeListeners)return a.proceed()}function B(a,c,d){var t=z(a.__name,c);d&&t.push(r);return b(a[c],c,t)}function z(a,b){var c=[],d=g.settings.aspects;if(!d||0===d.length)return c;for(var d=O(d),t=d.length-1;-1<t;t--){var f=d[t];if(!f.target||f.compiledTarget.test(a)){var e=f.interceptors;if(!f.pointCut||f.compiledPointCut.test(b))if(F(e))for(f=e.length-1;-1<
f;f--)c=c.concat(e[f]);else c.push(e)}}return c}function b(a,b,c){for(var d=function(a,b,c){return function(){var d=this;return c.call(d,{target:d,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(d,this.args)}})}},t=0,f=c.length;t<f;t++)a=d(a,b,c[t]);return a}function h(a,b,c){if(c&&"rootElement"===a)return c.rootElement;for(var d=["window","document","navigator"],t=0,f=d.length;t<f;t++){var e=d[t];if(a===e||ab(a,e+"."))return g.u.obj.getByPath(a,ea(b))}return c&&ab(a,"this.")?g.u.obj.getByPath(a.slice(5),
c):a}function A(a,b){return a.hasOwnProperty(b)&&Pa(b,"Logic")}function k(a,b,c){if(c){var d=ya.get(a.__name);if(d)for(c=0,f=d.childControllerProperties.length;c<f;c++){var t=d.childControllerProperties[c];if((e=a[t])&&!1===b(a[t],a,t))return!1}else for(t in a){var d=a,f=t,e=c,h=d[f];if(Pa(f,"Controller")&&"rootController"!==f&&"parentController"!==f&&h&&(e||h.__controllerContext&&!h.__controllerContext.isRoot&&(!h.parentController||h.parentController===d))&&!1===b(a[t],a,t))return!1}}else if(!Fa(a)){t=
a.__controllerContext.childControllers;c=0;for(var f=t.length;c<f;c++){var e=t[c];if(!1===b(e,a))return!1}}}function d(a,b){var c=ya.get(a.__name);if(c)for(var d=0,t=c.logicProperties.length;d<t;d++){var f=c.logicProperties[d];if(!1===b(a[f],a,f))return!1}else for(f in a)if(A(a,f)&&!1===b(a[f],a,f))return!1}function l(a,b,c,d){return!1===b.call(this,a,c,d)?!1:k(a,function(a,c,d){if(!1===l(a,b,c,d))return!1})}function f(a,b,c,d){if(!1===k(a,function(a,c,d){if(!a||!1===f(a,b,c,d))return!1})||!1===b.call(this,
a,c,d))return!1}function D(a,b){var c=[];k(a,function(a){(a=a[b])&&c.push(a)});return c}function P(a){var b=a.__controllerContext.cache.bindMap,c=V(a.rootElement),d;for(d in b)for(var t=Q(a,b[d],a[d]),f=0,e=t.length;f<e;f++)W(t[f],c)}function Q(b,c,d){function t(b){var c=b.handler,d=b.controller;b.originalHandler||(b.originalHandler=c);b.handler=function(){var t=b.isNativeBind||1!==g.settings.listenerElementType?this:a(this);c.call(d,Va(b,arguments),t)}}var f=c.selector,e=c.eventName,h=c.bindTarget,
k=c.isGlobal,w=c.isBindRequested;switch(e){case "mousewheel":d=U(b,e,d);break;case "h5trackstart":case "h5trackmove":case "h5trackend":d=T(b,e,d);var l=b.__controllerContext,e=!1;l.h5trackEventHandlerInfos=l.h5trackEventHandlerInfos||[];for(var n=l.h5trackEventHandlerInfos,l=0,x=n.length;l<x;l++){var L=n[l];if(h){if(bb(h,L.bindTarget)){e=!0;break}}else if(f===L.selector&&k===L.isGlobal&&w===L.isBindRequested){e=!0;break}}e||(d=S(b).concat(d),n.push(c));break;default:d=R(b,e,d)}F(d)||(d=[d]);l=0;for(x=
d.length;l<x;l++)c=d[l],t(c),c.isBindRequested=w,c.isGlobal=k,c.bindTarget=h,c.selector=f,c.controller=b;return d}function W(b,c){var d=b.controller,t=d.rootElement,f=b.selector,e=b.eventName,k=b.handler,w=b.isBindRequested,l=b.isGlobal;b.bindTarget?(b.evSelectorType=La.SELECTOR_TYPE_OBJECT,ja(b)):l?(d=h(f,c,d),w||!y(d)?(b.evSelectorType=La.SELECTOR_TYPE_OBJECT,b.bindTarget=y(d)?a(d):d,ja(b)):(b.evSelectorType=La.SELECTOR_TYPE_GLOBAL,a(c).delegate(d,e,k)),b.evSelector=d):(b.evSelectorType=La.SELECTOR_TYPE_LOCAL,
b.evSelector=f,w?(b.bindTarget=a(f,t),ja(b)):a(t).delegate(f,e,k));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Ua&&"h5trackstart"===e&&null!=g.settings.trackstartTouchAction&&(l?a(b.evSelector,c):a(b.evSelector,t)).each(function(){this.style[Wa]=g.settings.trackstartTouchAction}))}function na(b,c,d){var t=b.controller,f=t.rootElement,e=b.selector,h=b.handler,k=b.eventName,w=b.isGlobal;if(b.bindTarget)c=b.bindTarget,f=b.eventName,e=b.handler,b.isNativeBind?c.removeEventListener(f,
e):a(c).unbind(f,e);else if(w){if(null==ea(c))return;a(c).undelegate(e,k,h)}else a(f).undelegate(e,k,h);d||(d=t.__controllerContext.boundHandlers,d.splice(a.inArray(b,d),1))}function J(a,b){l(a,function(a){a.__controllerContext.executeListeners=b})}function M(a,b,c){return function(){var d=null,t=a[b],f=a.__name,e=!1,e="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!e&&t)try{d=a[b]({args:a.__controllerContext.args})}catch(h){oa(a,h)}d&&H(d.done)&&H(d.fail)?d.done(c).fail(function(){var b=
ia(6033,f,Ca(arguments));oa(a.rootController,null,b)}):c()}}function X(a,b){function c(d){var t,f;"__init"===b?(t=la(d),f=[d.preInitPromise],d.parentController&&f.push(d.parentController.initPromise)):"__postInit"===b?(t=da(d),f=u(d)):(t=K(d),f=C(d));var e=a.__controllerContext;e.waitingPromisesManagerMap=e.waitingPromsiesManager||{};e.waitingPromisesManagerMap[b]=ka(f,M(d,b,t))}Ma(a)||l(a,c)}function u(a){var b=D(a,"postInitPromise");b.push(a.initPromise);return b}function C(a){var b=D(a,"readyPromise");
b.push(a.postInitPromise);return b}function la(b){return function(){function d(){var a=!0;l(b.rootController,function(b){return a=b.isInit});return a}if(!ma(b))if(b.isInit)d()&&t(b.rootController);else{b.isInit=!0;var c=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var f=b.rootElement;try{var e=b.__meta,h=b.__controllerContext.childControllers,w;for(w in e)-1!==a.inArray(b[w],h)&&(b[w].__controllerContext.metaRootElement=
e[w]&&e[w].rootElement);k(b,function(a,d){var c=a.__controllerContext.metaRootElement;delete a.__controllerContext.metaRootElement;a.rootElement||(c=c?G(c,a,b):f,v(c,a.__controllerContext.controllerDef,a.__name),a.rootElement=c,a.view.__controller=a)})}catch(g){oa(b,g);return}e=d();c.resolveWith(b);!ma(b)&&e&&t(b.rootController)}}}function da(b){return function(){if(!ma(b)){b.isPostInit=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__postInit=
ka(u(b),function(){if(!ma(b)){var d=c.postInitDfd;if(d&&(delete c.postInitDfd,d.resolveWith(b),!ma(b)&&!c.isExecutedBind))if(c.isRoot){var d=b.__meta,t=c.childControllers,f;for(f in d)-1!==a.inArray(b[f],t)&&(b[f].__controllerContext.metaUseHandlers=d[f]&&d[f].useHandlers);l(b,function(a,b){var c=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==c&&P(a))});if(!1!==c.managed&&(a(b.rootElement).trigger("h5controllerbound",
b),ma(b)))return;Na(b)}else b.rootController.isPostInit&&(b.parentController.__meta&&!1===b.parentController.__meta.userHandlers||P(b),Na(b.rootController))}})}}}function K(b){return function(){if(!ma(b)){b.isReady=!0;var c=b.__controllerContext;c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__ready=ka(C(b),function(){if(!ma(b)){var d=c.readyDfd;d&&(delete c.readyDfd,d.resolveWith(b),!ma(b)&&c.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function Y(b,
c){if(!y(b))return a(b);var d=a.trim(b);return Ea.test(d)?(d=a.trim(d.substring(1,d.length-1)),a(h(d,V(c.rootElement),c))):a(c.rootElement).find(b)}function R(a,b,c){return{controller:a,eventName:b,handler:c}}function U(a,b,c){return{controller:a,eventName:"undefined"===typeof document.onmousewheel?"DOMMouseScroll":b,handler:function(b){var d=b.event;null==d.wheelDelta&&d.originalEvent&&null!=d.originalEvent.wheelDelta&&(d.wheelDelta=d.originalEvent.wheelDelta);null==d.wheelDelta&&d.originalEvent&&
null!=d.originalEvent.detail&&(d.wheelDelta=40*-d.originalEvent.detail);c.call(a,b)}}}function T(b,c,d){var t=null;if("h5trackstart"===c)return R(b,c,d);t=R(b,c,function(b){var c=b.event;if(c&&null==c.offsetX&&null==c.offsetY){var t=c.h5DelegatingEvent;if(!t)return d.apply(this,arguments);t=t.type;if("mousemove"===t||"mouseup"===t)t=a(c.currentTarget).offset()||{left:0,top:0},c.offsetX=c.pageX-t.left,c.offsetY=c.pageY-t.top}d.apply(this,arguments)});t.originalHandler=d;return t}function S(b,c){function d(a,
b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&(b[c]=a[c]);b.h5DelegatingEvent=a}function t(c,f,e){return function(l){var g;a:{switch(c){case "touchstart":case "mousedown":g="h5trackstart";break a;case "touchmove":case "mousemove":g="h5trackmove";break a;case "touchend":case "mouseup":g="h5trackend";break a}g=void 0}var n="h5trackstart"===g;if(!n||!w){var x=0===l.event.type.indexOf("touch");x&&aa(l.event,c);var L=new a.Event(g);
d(l.event,L);var m=l.event.target;f&&(m=f);e&&e(L);var oa=l.event.originalEvent||l.event;n&&-1===a.inArray(oa,za)&&(za=[],Da=[]);var I=a.inArray(oa,za);-1===I&&(I=za.push(oa)-1,Da[I]=!1);Da[I]||x&&!w&&!n||(Da[I]=!0,a(m).trigger(L,l.evArg),w=!0);l.event.currentTarget===document&&("h5trackend"===g&&(za=[],Da=[]),-1!==a.inArray(oa,za)&&(za.splice(I,1),Da.splice(I,1)));if(n&&w){L.isDefaultPrevented()||L.h5DelegatingEvent.preventDefault();g=L.target;var p=L.clientX,q=L.clientY,Ja=x?"touchmove":"mousemove",
ca=x?"touchend":"mouseup",u=t(Ja,g,function(a){var b=a.clientX,c=a.clientY;a.dx=b-p;a.dy=c-q;p=b;q=c}),G=t(ca,g),Z=function(a){l.event=a;l.evArg=ba(arguments);u(l)},r=function(a){l.event=a;l.evArg=ba(arguments);G(l)},qa=x?a(g):h;k=function(){za=[];Da=[];qa.unbind(Ja,Z);qa.unbind(ca,r);x||b.rootElement===document||(a(b.rootElement).unbind(Ja,Z),a(b.rootElement).unbind(ca,r))};qa.bind(Ja,Z);qa.bind(ca,r);x||b.rootElement===document||(a(b.rootElement).bind(Ja,Z),a(b.rootElement).bind(ca,r))}else"h5trackend"===
g&&(k(),w=!1)}}}function f(a){return{controller:b,selector:c,eventName:a,handler:t(a),isInnerBindObj:!0}}var e="undefined"!==typeof document.ontouchstart,h=a(V(b.rootElement)),k=null,w=!1,l=[f("mousedown")];e&&l.push(f("touchstart"));return l}function N(b){if("svg"!==b.tagName.toLowerCase()||gb())return a(b).offset();var c=V(b).createElementNS("http://www.w3.org/2000/svg","rect"),d=b.viewBox,t=d.baseVal.y;c.setAttribute("x",d.baseVal.x);c.setAttribute("y",t);c.setAttribute("width",1);c.setAttribute("height",
1);e(c);b.appendChild(c);d=a(c).offset();b.removeChild(c);return d}function aa(a,b){var c=a.originalEvent;if(c){var d="touchend"===b||"touchcancel"===b?c.changedTouches[0]:c.touches[0],t=d.pageX,f=d.pageY;a.pageX=c.pageX=t;a.pageY=c.pageY=f;a.screenX=c.screenX=d.screenX;a.screenY=c.screenY=d.screenY;a.clientX=c.clientX=d.clientX;a.clientY=c.clientY=d.clientY;d=a.target;if(d.ownerSVGElement)d=d.farthestViewportElement;else if(d===window||d===document)d=document.body;a&&null==a.offsetX&&null==a.offsetY&&
(d=N(d),f-=d.top,a.offsetX=c.offsetX=t-d.left,a.offsetY=c.offsetY=f)}}function ba(a){return 3>a.length?a[1]:Ca(a).slice(1)}function Va(a,b){var c=null,d=null;b&&(c=b[0],d=ba(b));var t=c;if(t&&null==t.offsetX&&null==t.offsetY&&t.pageX&&t.pageY){var f=t.target;if(f.ownerSVGElement)f=f.farthestViewportElement;else if(f===window||f===document)f=document.body;f=N(f);t.offsetX=t.pageX-f.left;t.offsetY=t.pageY-f.top}return new q(a.controller,c,d,a.evSelector,a.evSelectorType)}function Xa(a){l(a,function(a){a.rootElement=
null;a.view.__controller=null})}function G(b,c,d){null==b&&p(6001,[c.__name]);y(b)||"object"===typeof b||p(6030,[c.__name]);b=d?Y(b,d):a(b);0===b.length&&p(6003,[c.__name]);1<b.length&&p(6004,[c.__name]);return b.get(0)}function Na(b){var c=b.__controllerContext.managed,d=Aa.controllers;-1===a.inArray(b,d)&&!1!==c&&d.push(b);b.__controllerContext.triggerReadyExecuted=!0;X(b,"__ready")}function E(a,b){!1===b?X(a,"__init"):setTimeout(function(){ma(a)||!a.__controllerContext.isRoot&&a.rootController.readyDfd||
X(a,"__init")},0)}function t(a){a.__controllerContext.triggerPostInitExecuted=!0;X(a,"__postInit")}function L(a,b){l(a,function(a){var c=sa();c.resolve();var d=a.__controllerContext;d.templatePromise=c.promise();d.initDfd=sa();d.postInitDfd=sa();d.readyDfd=sa();d.isUnbinding=!1;d.isUnbinded=!1;d.isExecutedBind=!1;d.triggerPostInitExecuted=!1;d.triggerReadyExecuted=!1;d.args=b;a.initPromise=d.initDfd.promise();a.postInitPromise=d.postInitDfd.promise();a.readyPromise=d.readyDfd.promise();a.isInit=!1;
a.isPostInit=!1;a.isReady=!1})}function I(b,c){var d=null,t=c;a.isPlainObject(t)?d=t.target:t={};d=d?Y(d,b):b.rootElement;return g.ui.indicator.call(b,d,t)}function ca(a,b){var c=[],d=null;f(a,function(a){if(a[b]&&H(a[b])){try{var t=a[b]()}catch(f){d=d||f}Ia(t)&&c.push(t)}});if(d)throw d;return c}function oa(a,b,c){function d(){var a=b||c||w||g;f(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&(b[c]=null)});
g?l.rejectWith(e,[g]):l.resolveWith(e);if(a&&(Aa.dispatchEvent({type:"lifecycleerror",detail:a,rootController:e}),b||w))throw b||w;}function t(){g=w||ia(6038,e.__name,Ca(arguments));d()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);if(!e){if(b)throw b;}else if(!Ma(e)){e.__controllerContext.isDisposing=1;try{qa(e,c||b)}catch(h){b=b||h}var k,w=null;try{k=ca(e,"__dispose")}catch(h){b=b||h,w=w||h}var l=e.deferred(),g=null;w?t():ka(k,d,t,!0);return l.promise()}}function qa(b,
c){if(!ma(b)){b.__controllerContext.isUnbinding=1;hb(b,c);var d;try{ca(b,"__unbind")}catch(t){d=t}l(b,function(a){var b=a.rootElement;if(b){for(var b=V(b),c=a.__controllerContext.boundHandlers,d=0,t=c.length;d<t;d++)na(c[d],b,!0);a.__controllerContext.boundHandlers=[]}});b.__controllerContext.unbindList={};Aa.controllers=a.grep(Aa.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);Xa(b);b.__controllerContext.isUnbinded=
1;if(d)throw d;}}function ta(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?ta(a,b.parentController):g.core.view}function Fa(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function Ma(a){return Fa(a)||a.__controllerContext.isDisposing}function ma(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||Fa(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function hb(a,b){var c=["postInitDfd","readyDfd"],
d=[];l(a,function(a){d.push(a);var c=a.__controllerContext.initDfd;!c||wa(c)||Ba(c)||c.rejectWith(a,[b])});for(var t=0,f=c.length;t<f;t++)for(var e=c[t],h=d.length-1;0<=h;h--){var k=d[h],w=k.__controllerContext[e];!w||wa(w)||Ba(w)||w.rejectWith(k,[b])}}function ua(a,b){for(var c=a.childNodes,d=0,t=c.length;d<t;d++){var f=c[d];if(1===f.nodeType){if(f=ua(f,b))return f}else if(8===f.nodeType){var e=f.nodeValue;if(0===e.indexOf("{h5view ")){var h=e.indexOf("}");if(-1!==h&&(e=e.slice(0,h).match(/id="([A-Za-z][\w-:\.]*)"/))&&
e[1]===b)return f}}}return null}function cb(a){var b=this;return function(){return a.apply(b,arguments)}}function db(a){var b=this;return function(){var c=g.u.obj.argsToArray(arguments);c.unshift(this);return a.apply(b,c)}}function w(a,b,c){function d(t){g.u.obj.getByPath("h5.core.view")||p(6029);c=F(c)?c:[c];for(var f=[],e=0,h=c.length;e<h;e++){var k=Ga(c[e])?c[e]:g.res.dependsOn(c[e]);f.push(k.resolve("ejsfile"))}ka(f,function(c){c=F(c)?c:[c];for(var d=0,t=c.length;d<t;d++)for(var f=c[d].templates,
e=0,h=f.length;e<h;e++)try{a.view.__view.register(f[e].id,f[e].content)}catch(k){b.reject(k)}b.resolve()},function(a){var c=a.detail.error.status;t===g.settings.dynamicLoading.retryCount||0!==c&&12029!==c?setTimeout(function(){b.reject(a)},0):setTimeout(function(){d(++t)},g.settings.dynamicLoading.retryInterval)})}d(0)}function x(b,c,d,t){var f=y(b),e=f?null:b;b=f?a.trim(b):null;c=a.trim(c);var h=!f||Ea.test(b),k=Ha.test(c);k&&(c=a.trim(a.trim(c.substring(1,c.length-1))));f&&h&&(b=a.trim(b.substring(1,
b.length-1)),"this"===b&&p(6012,[d.__name],{controllerDef:d}));return{selector:b,bindTarget:e,isGlobal:h,isBindRequested:k,eventName:c,propertyKey:t}}function Z(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function Qa(b){var c=new Z,d=c.logicProperties,t=c.eventHandlerProperties,f=c.functionProperties,e=c.otherProperties,h=c.bindMap,k=c.childControllerProperties,w={},l;for(l in b){var g=
b,n=l;if(-1!==n.indexOf(" ")&&H(g[n])){t.push(l);var g=a.trim(l),n=g.lastIndexOf(" "),g=x(g.substring(0,n),g.substring(n+1,g.length),b,l),n=g.selector,L=g.eventName,m=g.isGlobal,I=g.isBindRequested;w[n]||(w[n]={});w[n][L]||(w[n][L]={});w[n][L][m]||(w[n][L][m]={});w[n][L][m][I]?p(6013,[b.__name,n,L],{controllerDef:b}):w[n][L][m][I]=1;h[l]=g}else Pa(l,"Controller")&&b[l]&&!H(b[l])?k.push(l):Pa(l,"Logic")&&b[l]&&!H(b[l])?d.push(l):H(b[l])?f.push(l):e.push(l)}return c}function eb(){this.logicProperties=
[];this.functionProperties=[]}function ib(a){var b=new eb,c=b.functionProperties,d=b.logicProperties,t;for(t in a)A(a,t)?d.push(t):H(a[t])&&c.push(t);return b}function jb(b,c){function t(b,c,d){c=c.__logicContext.waitingPromises=c.__logicContext.waitingPromises||[];-1===a.inArray(b,c)&&(c.push(b),b.done(d))}function f(h,k){function w(){if(!h.__logicContext.isCalledReady){var f=!0;d(h,function(a){return f=a.__logicContext.isReady});if(f){var k=H(h.__ready)&&h.__ready();h.__logicContext.isCalledReady=
!0;Ia(k)?(e.push(k),k.done(function(){h.__logicContext.isReady=!0;e.splice(a.inArray(k,e),1);h.__logicContext.waitingPromises=null;h===b&&c.resolveWith(h)})):(h.__logicContext.isReady=!0,h.__logicContext.waitingPromises=null,h===b&&c.resolveWith(h))}else for(var l=0,g=e.length;l<g;l++)t(e[l],h,w)}}h.__logicContext.isReady=!1;h.__logicContext.isCalledReady=!1;d(h,f);w()}var e=[];f(b)}function bb(a,b){if(a===b)return!0;var c=Ya(a),d=Ya(b);if(!c&&!d)return!1;c=c?a.toArray():[a];d=d?b.toArray():[b];if(c.length!==
d.length)return!1;for(var t=0,f=c.length;t<f;t++)if(c[t]!==d[t])return!1;return!0}function ga(a,b){a&&a.rootElement||p(6035,b)}function ha(a,b){a&&!Fa(a)||p(6036,b)}function ja(b){var c=b.bindTarget,d=b.eventName,t=b.handler;c&&"undefined"!==typeof c.nodeType||$a(c)||Ya(c)?a(c).bind(d,t):c&&c.addEventListener?(c.addEventListener(d,t),b.isNativeBind=!0):b.isBindCanceled=!0}function pa(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var c=
a.rootController;l(b,function(a){a.rootController=c})}}function fb(a){this.__controller=a;g.u.obj.getByPath("h5.core.view")&&(this.__view=g.core.view.createView())}function Oa(b,c,d,t,f){for(var e=0,h=Za.length;e<h;e++)Za[e](this);this.__name=c;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,isRoot:f,boundHandlers:[],controllerDef:d,args:null};(b=d&&d.__defaultArgs)?this.__controllerContext.args=a.extend({},b,t):t&&(this.__controllerContext.args=t);this.isReady=
this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=g.log.createLogger(c);this.view=new fb(this)}function ra(){this.rootElement=document;this.controllers=[];a(document).bind("triggerIndicator",function(a,b){null==b.target&&(b.target=document);b.indicator=I(this,b);a.stopPropagation()})}function va(){this._init()}function Ra(b,d,t,f){var e=!f||!f.isInternal;if(!e&&Fa(f.rootController))return null;
var h=d.__name;y(h)&&0!==a.trim(h).length||Ga(d)||p(6006,null,{controllerDefObj:d});t&&!a.isPlainObject(t)&&p(6007,[h],{controllerDefObj:d});d.__controllerContext&&p(6008,null,{controllerDefObj:d});d.__defaultArgs&&(a.isPlainObject(d.__defaultArgs)||p(6046,[h],{controllerDefObj:d}));var k=ya.get(h);k||c(e,b,d,h);e&&n(d,h);k||(k=Qa(d),ya.register(h,k));e&&v(b,d,h);var l=new Oa(b?a(b).get(0):null,h,d,t,e),g=e?l:f.rootController,L=sa(),h=L.promise().fail(Sa),x=sa(),m=x.promise().fail(Sa),I=sa(),q=I.promise().fail(Sa),
ca=sa(),u=ca.promise(),G=f&&f.async;!1===G&&(L.resolve(),x.resolve(),I.resolve(),ca.resolve());e||u.fail(Sa);b=l.__controllerContext;b.cache=k;b.preInitDfd=L;b.initDfd=x;b.postInitDfd=I;b.readyDfd=ca;l.preInitPromise=h;l.initPromise=m;l.postInitPromise=q;l.readyPromise=u;b.childControllers=[];for(var Z=e?[]:f.promisesForTriggerInit,x=0,m=k.logicProperties.length;x<m;x++)I=k.logicProperties[x],h=d[I],Ga(h)?(q=h.resolve("namespace"),Z.push(q),q.done(function(b,c){return function(d){d=xa(d);l[b]=d;Z.splice(a.inArray(c,
Z),1);Z.push(d.readyPromise);d.readyPromise.done(function(b){return function(){Z.splice(a.inArray(b,Z),1)}}(d.readyPromise))}}(I,q))):l[I]=xa(h);h=a.extend(!0,{},d);d=d.__templates;x=sa();m=x.promise();Ga(d)||d&&0<d.length?w(l,x,d):x.resolve();m.done(function(){Ma(l)||L.resolveWith(l)}).fail(function(a){L.rejectWith(l,[a]);oa(l,null,a)});x=0;for(m=k.eventHandlerProperties.length;x<m;x++)I=k.eventHandlerProperties[x],l[I]=B(h,I,!0);x=0;for(m=k.functionProperties.length;x<m;x++)I=k.functionProperties[x],
l[I]=B(h,I);x=0;for(m=k.otherProperties.length;x<m;x++)I=k.otherProperties[x],l[I]=h[I];b.managed=f&&f.managed;try{if(l.__construct&&l.__construct({args:l.__controllerContext.args}),Ma(l))return null}catch(r){return oa(g,r),null}e?(l.rootController=l,l.parentController=null):(l.parentController=f.parentController,l.rootController=f.rootController);if(l.__controllerContext.childControllers)for(x=0,f=l.__controllerContext.childControllers,m=f.length;x<m;x++)f[x].rootController=l.rootController;l.__controllerContext.isExecutedConstruct=
!0;f=l.__meta;x=0;for(m=k.childControllerProperties.length;x<m;x++)if(I=k.childControllerProperties[x],d=h[I],b=null,f&&f[I]&&f[I].inheritArgs&&(b=t),Ga(d))q=d.resolve("namespace"),Z.push(q),q.done(function(b,c,d){return function(t){t=Ra(null,a.extend(!0,{},t),d,{isInternal:!0,parentController:l,rootController:g,promisesForTriggerInit:Z,async:G});if(null==t)return null;l[b]=t;l.__controllerContext.childControllers.push(t);Z.splice(a.inArray(c,Z),1)}}(I,q,b));else{b=Ra(null,a.extend(!0,{},h[I]),b,
{isInternal:!0,parentController:l,rootController:g});if(null==b)return null;l.__controllerContext.childControllers.push(b);l[I]=b}if(e){var qa=function(){0===Z.length?E(l,G):ka(Z,qa)};ka(Z,qa)}return l}function xa(b){function c(b,d){var t=b.__name;y(t)&&0!==a.trim(t).length||p(6017,null,{logicDefObj:b});b.__logicContext&&p(6018,null,{logicDefObj:b});var f=ya.get(t);f||(d&&m(b),f=ib(b));for(var h=a.extend(!0,{},b),k=f.functionProperties,l=0,w=k.length;l<w;l++){var n=k[l];h[n]=B(h,n)}h.deferred=sa;
h.log=g.log.createLogger(t);h.__logicContext={logicDef:b};h.own=cb;h.ownWithOrg=db;ya.register(t,f);H(h.__construct)&&h.__construct();t=f.logicProperties;l=0;for(w=t.length;l<w;l++)n=t[l],f=h[n],Ga(f)?(f=f.resolve(),e.push(f),f.done(function(b,d){return function(t){h[b]=c(t);e.splice(a.inArray(d,e),1)}}(n,f))):h[n]=c(f);return h}function d(){0===e.length?jb(h,t):ka(e,d)}var t=g.async.deferred(),f=t.promise(),e=[],h=c(b,!0);h.readyPromise=f;ka(e,d);return h}var La={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,
SELECTOR_TYPE_OBJECT:3},Ea=/^\{.*\}$/,Ha=/^\[.*\]$/,sa=g.async.deferred,Ia=g.async.isPromise,ab=g.u.str.startsWith,Pa=g.u.str.endsWith,Ta=g.u.str.format,Ca=g.u.obj.argsToArray,Ya=g.u.obj.isJQueryObject,Ga=g.res.isDependency,Sa=function(){},Aa,ya,za=[],Da=[],Wa="",Ua=function(){var a=document.createElement("div");return"undefined"!==typeof a.style.touchAction?(Wa="touchAction",!0):"undefined"!==typeof a.style.msTouchAction?(Wa="msTouchAction",!0):!1}(),Za=[],gb=function(){var b=null;return function(){if(null!=
b)return b;var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("width",1);c.setAttribute("height",1);var d=document.createElementNS("http://www.w3.org/2000/svg","rect");d.setAttribute("x",1);d.setAttribute("y",1);d.setAttribute("width",1);d.setAttribute("height",1);e(d);a(function(){document.body.appendChild(c);var a=c.getBoundingClientRect().top;c.appendChild(d);b=a===c.getBoundingClientRect().top;document.body.removeChild(c)});return b}}();a.extend(q.prototype,La);
a.extend(fb.prototype,{get:function(a,b){ga(this.__controller,"view#get");return ta(a,this.__controller).get(a,b)},update:function(a,b,c){ga(this.__controller,"view#update");a=Y(a,this.__controller);return ta(b,this.__controller).update(a,b,c)},append:function(a,b,c){ga(this.__controller,"view#append");a=Y(a,this.__controller);return ta(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){ga(this.__controller,"view#prepend");a=Y(a,this.__controller);return ta(b,this.__controller).prepend(a,
b,c)},load:function(a){ga(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){ga(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){ga(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){ga(this.__controller,"view#isAvailable");return ta(a,this.__controller).isAvailable(a)},clear:function(a){ga(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){ga(this.__controller,
"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},bind:function(b,c){ga(this.__controller,"view#bind");var d=b;if(y(b)&&0===b.indexOf("h5view#")){for(var t=ua(this.__controller.rootElement,b.slice(7)),d=t.nodeValue,d=d.slice(d.indexOf("}")+1),f=a("\x3cdiv\x3e").append(d),d=[],e=f[0].childNodes,h=0,k=e.length;h<k;h++)d.push(e[h]);f.empty();f=document.createDocumentFragment();h=0;for(k=d.length;h<k;h++)f.appendChild(d[h]);t.parentNode.insertBefore(f,t.nextSibling)}return this.__view.bind(d,
c)}});a.extend(Oa.prototype,{$find:function(b){ha(this,"$find");ga(this,"$find");return a(this.rootElement).find(b)},deferred:function(){ha(this,"deferred");return sa()},trigger:function(b,c){ha(this,"trigger");ga(this,"trigger");var d=y(b)?a.Event(b):b;a(this.rootElement).trigger(d,c);return d},own:function(){ha(this,"own");return cb.apply(this,Ca(arguments))},ownWithOrg:function(){ha(this,"ownWithOrg");return db.apply(this,Ca(arguments))},bind:function(a,b){ha(this,"bind");this.__controllerContext.isRoot||
p(6031);this.rootElement=G(a,this);this.view.__controller=this;L(this,b?b:null);E(this);return this},unbind:function(){ha(this,"unbind");ga(this,"unbind");this.__controllerContext.isRoot||p(6031);this.__controllerContext.isExecutedConstruct||p(6037);try{qa(this)}catch(a){oa(this,a)}},dispose:function(){ha(this,"dispose");this.__controllerContext.isRoot||p(6031);return oa(this)},triggerIndicator:function(b){ha(this,"triggerIndicator");ga(this,"triggerIndicator");var c={indicator:null};b&&a.extend(c,
b);a(this.rootElement).trigger("triggerIndicator",[c]);return c.indicator},indicator:function(a){ha(this,"indicator");ga(this,"indicator");return I(this,a)},enableListeners:function(){ha(this,"enableListeners");J(this,!0)},disableListeners:function(){ha(this,"disableListeners");J(this,!1)},throwError:function(a,b){ha(this,"throwError");var c=Ca(arguments);c.unshift(null);this.throwCustomError.apply(this,c)},throwCustomError:function(a,b,c){ha(this,"throwCustomError");2>arguments.length&&p(6005);var d;
b&&y(b)?d=Error(Ta.apply(null,Ca(arguments).slice(1))):(d=Error(),d.detail=b);d.customType=a;throw d;},on:function(a,c,d){ha(this,"on");ga(this,"on");a=x(a,c,this);c=z(this.__name,"");c.push(r);a=Q(this,a,b(d,"",c));c=0;for(var t=a.length;c<t;c++){var f=a[c];f.isInnerBindObj||(f.originalHandler=d);W(f,V(this.rootElement))}},off:function(a,b,c){ha(this,"off");ga(this,"off");var d=x(a,b,this);a=this.__controllerContext.boundHandlers;var t=null,f=d.bindTarget;b=d.eventName;for(var e=d.selector,h=d.isGlobal,
d=d.isBindRequested,k=0,l=a.length;k<l;k++){var w=a[k];if(f){if(bb(f,w.bindTarget)&&b===w.eventName&&w.originalHandler===c){t=w;break}}else if(e===w.selector&&h===w.isGlobal&&d===w.isBindRequested&&c===w.originalHandler){t=w;break}}t&&na(t,V(this.rootElement))},manageChild:function(b){ha(this,"manageChild");if(ma(this))p(6041);else if(b&&b.__controllerContext)if(ma(b))p(6040);else{b.rootController!==b&&p(6042);pa(this,b);var c=Aa.controllers;b=a.inArray(b,c);-1!=b&&c.splice(b,1)}else p(6039)},unmanageChild:function(b,
c){ha(this,"unmanageChild");if(ma(this))p(6043);else if(b.parentController!==this)p(6044);else if((c=!1===c?!1:!0)||b.rootElement){b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var d=this.__controllerContext.childControllers,f=a.inArray(b,d);-1!==f&&d.splice(f,1);c?b.dispose():(Aa.controllers.push(b),d=this.__controllerContext.waitingPromisesManagerMap,f=b.__controllerContext.waitingPromisesManagerMap,d&&(d.__postInit&&d.__postInit.remove(b.postInitPromise),d.__ready&&
d.__ready.remove(b.readyPromise)),f&&f.__init&&f.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?this.rootController.__controllerContext.triggerReadyInitExecuted||Na(b):t(b))}else p(6045)}});g.mixin.eventDispatcher.mix(ra.prototype);a.extend(ra.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var d=c&&c.deep,t=c&&c.name?O(c.name):null,f=a(b)[0],e=this.controllers,h=[],k=0,l=e.length;k<l;k++){var w=e[k];
t&&-1===a.inArray(w.__name,t)||!w.rootElement||(f===w.rootElement?h.push(w):d&&V(f)===V(w.rootElement)&&a.contains(f,w.rootElement)&&h.push(w))}return h}});a.extend(va.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});ya=new va;Aa=new ra;g.u.obj.expose("h5.core",{controllerManager:Aa,definitionCacheManager:{clear:function(a){ya.clear(a)},
clearAll:function(){ya.clearAll()}}});var Ka=null;fa.core.controllerInternal=Ra;fa.core.addControllerInstantiationHook=function(a){Za.push(a)};fa.core.isDisposing=Ma;g.u.obj.expose("h5.core",{controller:function(a,b,c){2>arguments.length&&p(6032);return Ra(a,b,c)},logic:xa,expose:function(a){var b=a.__name;b||p(6019,null,{target:a});var c=b.lastIndexOf(".");if(-1===c)window[b]=a;else{var d=b.substr(0,c),b=b.substr(c+1,b.length),c={};c[b]=a;g.u.obj.expose(d,c)}}})})();(function(){function e(a){return a instanceof
Date}function c(a){return function(c){for(var e=a.queries,k=0,d=e.length;k<d;k++){var l=e[k],f=l.compareFunction;if(!f(c[l.prop],l.queryValue))return!1}e=a.userFunctions;k=0;for(d=e.length;k<d;k++)if(!e[k](c))return!1;e=a.nestedCriterias;k=0;for(d=e.length;k<d;k++)if(!e[k].match(c))return!1;return!0}}function n(a){return function(c){for(var e=a.queries,k=0,d=e.length;k<d;k++){var l=e[k],f=l.compareFunction;if(f(c[l.prop],l.queryValue))return!0}e=a.userFunctions;k=0;for(d=e;k<d;k++)if(!e[k](c))return!0;
e=a.nestedCriterias;k=0;for(d=e.length;k<d;k++)if(e[k].match(c))return!0;return!1}}function m(b){var h=[],g=[],k=[],d={queries:h,nestedCriterias:g,userFunctions:k},l;for(l in b)if("__op"!==l)if(a.isPlainObject(b[l]))g.push(m(b[l]));else if(H(b[l]))k.push(b[l]);else{var f=b[l],q=F(f)?f[0]:f,v;v=q instanceof RegExp?B:e(q)?z:r;var Q=a.trim(l.replace(/ +/g," ")).split(" "),W=Q[1]||"\x3d";(v=v[W])||p(1,[W,a.type(q)]);h.push({prop:Q[0],queryValue:f,compareFunction:v})}d.match="or"===b.__op?n(d):c(d);return d}
function v(a){this.result=a}function q(a){this._src=a}var r={"\x3d":function(a,c){return a===c},"!\x3d":function(a,c){return a!==c},"\x3c":function(a,c){return a<c},"\x3e":function(a,c){return a>c},"\x3c\x3d":function(a,c){return a<=c},"\x3e\x3d":function(a,c){return a>=c},between:function(a,c){var e=c[1];return c[0]<=a&&a<=e},"!between":function(a,c){var e=c[1];return a<c[0]||e<a},"in":function(b,c){return-1!==a.inArray(b,c)},"!in":function(b,c){return-1===a.inArray(b,c)}},B={"\x3d":function(a,c){return c.test(a)},
"!\x3d":function(a,c){return!c.test(a)}},z={"\x3d":function(a,c){return e(a)?a.getTime()===c.getTime():!1},"!\x3d":function(a,c){return e(a)?a.getTime()!==c.getTime():!0},"\x3c":function(a,c){return e(a)?a.getTime()<c.getTime():!1},"\x3e":function(a,c){return e(a)?a.getTime()>c.getTime():!1},"\x3c\x3d":function(a,c){return e(a)?a.getTime()<=c.getTime():!1},"\x3e\x3d":function(a,c){return e(a)?a.getTime()>=c.getTime():!1},between:function(a,c){if(!e(a))return!1;var g=c[0].getTime(),k=c[1].getTime(),
d=a.getTime();return g<=d&&d<=k},"!between":function(a,c){if(!e(a))return!1;var g=c[0].getTime(),k=c[1].getTime(),d=a.getTime();return d<g||k<d},"in":function(a,c){if(!e(a))return!1;for(var g=a.getTime(),k=0,d=c.length;k<d;k++)if(g===c[k].getTime())return!0;return!1},"!in":function(a,c){if(!e(a))return!0;for(var g=a.getTime(),k=0,d=c.length;k<d;k++)if(g===c[k].getTime())return!1;return!0}};Ua({1:'演算子"{0}"で"{1}"型の値を比較することはできません',2:"{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません",3:"setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください",
4:"setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。",5:"addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。"});a.extend(q.prototype,{setCriteria:function(a){this._criteria=m(a);return this},execute:function(){for(var a=[],c=this._getDataSource(),e=!F(this._src),k=0,d=c.length;k<d;k++){var l=c[k];e?this._criteria.match(l.get())&&a.push(l):this._criteria.match(l)&&a.push(l)}if(this._orderFunction)a.sort(this._orderFunction);else if(this._addedOrders){var f=this._addedOrders,
g=f.length;a.sort(function(a,b){for(var c=0;c<g;c++){var d=f[c],k=d.key,d=d.isAsc,h=e?a.get(k):item,k=e?b.get(k):item;if(h>k)return d?1:-1;if(h<k)return d?-1:1}return 0})}return new v(a)},setOrderFunction:function(a){H(a)||p(3);this._addedOrders&&p(5);this._orderFunction=a;return this},addOrder:function(a,c){F(this._src)||this._src.schema.hasOwnProperty(a)||p(2,["addOrder",a,this._src.name]);this._orderFunction&&p(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:a,isAsc:!1!==
c});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this},_getDataSource:function(){return F(this._src)?this._src:this._src.toArray()}});fa.data={createQuery:function(){return new q(this)}};g.u.obj.expose("h5.core.data",{createQuery:function(a){return new q(a)}})})();(function(){function e(a){return(a=a&&y(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function c(b,c){return function ca(b,
d){if(!c[b])return!1;for(var t=0,f=c[b].length;t<f;t++)if(-1<a.inArray(c[b][t],d)||ca(c[b][t],d.concat([b])))return!0;return!1}(b,[])}function n(a){return"number"===typeof a&&isNaN(a)}function m(a,b){return null==a||n(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(y(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function v(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof
String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function q(b,c,d){function f(){e.push(l.call(this,arguments));if(d)throw null;}var e=[];try{if(!a.isPlainObject(b))throw f(15900),null;ra(b.name)||f(15901);var k=b.base,h=null;if(null!=k)if(y(k)&&0===k.indexOf("@")){var g=k.substring(1);c.models[g]?h=c.models[g].schema:f(15903,g)}else f(15902);var n=b.schema;h||null!=n||f(15904);if(!h&&!a.isPlainObject(n))throw f(6),null;}catch(m){p(15001,null,e)}}function r(b,d,f,k){function h(){g.push(l.call(this,arguments));
if(k)throw null;}"object"!==typeof b&&p(15008);var g=[];try{var q=function(b,c){null!=b&&("enum"!==c.elmType&&h(15817,E),(!F(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&h(15818,E))},u=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var f=b[d];if(null!=f)switch(d){case "notNull":!0!==f&&!1!==f?h(15811,E,d):x&&!f&&h(15821,E,d,f);break;case "min":case "max":switch(c.elmType){case "integer":(y(f)||!v(f)||n(f))&&h(15812,E,d);break;case "number":(y(f)||y(f)||!m(f)||
Infinity===f||-Infinity===f||n(f))&&h(15812,E,d);break;default:h(15813,E,d,c.elmType)}break;case "minLength":case "maxLength":switch(c.elmType){case "string":y(f)||!v(f)||n(f)||0>f?h(15815,E,d):x&&"maxLength"===d&&0===f&&h(15821,E,d,f);break;default:h(15813,E,d,c.elmType)}break;case "notEmpty":switch(c.elmType){case "string":!0!==f&&!1!==f?h(15811,E,d):x&&!f&&h(15821,E,d,f);break;default:h(15813,E,d,c.elmType)}break;case "pattern":switch(c.elmType){case "string":"regexp"!==a.type(f)&&h(15814,E,d);
break;default:h(15813,E,d,c.elmType)}}}b.notEmpty&&0===b.maxLength&&h(15816,E,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&h(15816,E,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&h(15816,E,"minLength","maxLength")}else h(15810,E)},G=function(a){x&&null==a&&(a="string");var b;null!=a&&(y(a)?(x&&"string"!==a&&"integer"!==a&&h(15824,E),b=e(a),b.elmType?(b.dataModel&&(d||h(15807,E,b.dataModel),f.models[b.dataModel]||h(15808,E,b.dataModel)),"enum"===b.elmType&&
null==w.enumValue&&h(15809,E)):h(15807,E,a)):h(15806,E))},r=function(a){if(null!=a){x&&h(15803,E);w.hasOwnProperty("defaultValue")&&h(15822,E);if(null==a.on)h(15804,E);else for(var c=O(a.on),d=0,f=c.length;d<f;d++)if(!b.hasOwnProperty(c[d])){h(15804,E);break}"function"!==typeof a.calc&&h(15805,E);da[E]=O(a.on)}};if(d){var D=!1,C;for(C in b)b[C]&&!0===b[C].id&&(D&&h(15800),D=!0);D||h(15801)}var da={},E;for(E in b){var w=null==b[E]?{}:b[E],x=d&&!!w.id;ra(E)||h(15802,E);r(w.depend);G(w.type);var D={},
Z=x&&null==Z?"string":w.type;y(Z)&&(D=e(Z));u(w.constraint,D);q(w.enumValue,D);x&&w.hasOwnProperty("defaultValue")&&h(15819,E)}for(var Qa in da)c(Qa,da)&&h(15823,Qa)}catch(eb){p(15009,null,g)}return!0}function B(a,b,c){c=[];try{for(var d in a){var f=a[d];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||"array"!==f.type&&!e(f.type).dimension)&&f.hasOwnProperty("defaultValue")){var h=f.defaultValue;b[d](h).length&&pushErrorReason(15820,d,h)}}return!0}catch(k){p(15009,null,c)}}function z(a,c,d){var f=
{},k;for(k in a){var l=k,g;g=d;var n=a[k]||{},m=[],q,p=0;q=n.type;var u=n.constraint||{};c&&n.id&&(q=q||"string",u.notNull=!0,"string"===q&&(u.notEmpty=!0));q&&(p=e(q),q=p.elmType,p=p.dimension,m.push(h(q,{manager:g,enumValue:n.enumValue})));u&&m.push(b(u));g=A({checkFuncs:m,dimension:p});f[l]=g}return f}function b(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});
null!=a.max&&a.max<b&&c.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null==a.pattern||b.match(a.pattern)||c.push({pattern:a.pattern});return c}}function h(b,c){var d=[{type:b}];switch(b){case "number":return function(a,b){return m(a,b)?[]:d};case "integer":return function(a,b){return v(a,b)?[]:d};case "string":return function(a,b){return null==a||y(a)||!b&&a instanceof String?[]:
d};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:d};case "enum":return function(b){var f;a:if(f=c.enumValue,n(b)){b=0;for(var t=f.length;b<t;b++)if(n(f[b])){f=!0;break a}f=!1}else f=null===b||-1<a.inArray(b,f);return f?[]:d};case "any":return function(){return[]}}var f=b.match(/^@(.+?)$/)[1],e=c.manager;return function(a){var b=e.models[f];return!b||"object"!==typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function A(a){var b=a.checkFuncs;if(!b||
0===b.length)return function(){return[]};var c=a.dimension||0;return function(a,d){function f(a,t){if(!t){for(var h=0,k=b.length;h<k;h++){var l=b[h](a,d);if(l.length)return e=e.concat(l),!1}return!0}if(null==a)return!0;if(!F(a)&&!g.core.data.isObservableArray(a))return e.push({dimension:c}),!1;h=0;for(k=a.length;h<k;h++)if(!f(a[h],t-1))return!1;return!0}var e=[];f(a,c);return e}}function k(a,b,c,f){a._values={};a._nullProps={};for(var e in b)b[e]&&d(b[e].type)&&(c=U(),c.relatedItem=a,a._values[e]=
c,a._nullProps[e]=!0)}function d(a){return a?-1!==a.indexOf("[]"):!1}function l(){return{code:arguments[0]}}function f(a,b,c,d){return{type:"itemsChange",created:a,recreated:b,removed:c,changed:d}}function D(b,c,f,e){function h(c){c=O(g[c].depend.on);for(var d=0,f=c.length;d<f;d++)if(-1===a.inArray(c[d],b._realProperty)&&-1!==a.inArray(c[d],l))return!1;return!0}function k(b,c){for(var d=0,f=c.length;d<f;d++){var e=n[c[d]];if(e)for(var t=0,h=e.length;t<h;t++){var l=e[t];-1===a.inArray(l,b)&&b.push(l)}}}
var l=[],g=b.schema||b._model.schema,n=b._dependencyMap,m={};for(e?l=b._dependProps.slice():k(l,O(f));0!==l.length;){f=[];e=0;for(var q=l.length;e<q;e++){var u=l[e];if(h(u)){var G=g[u].depend.calc.call(b,c);0!==b._validateItemValue(u,G,!0).length&&p(15016,[b._model?b._model.name:"n/a",u,G]);m[u]={oldValue:b._values[u],newValue:G};g[u]&&d(g[u].type)?G?(b._values[u].copyFrom(G),b._nullProps[u]=!1):(b._values[u].copyFrom([]),b._nullProps[u]=!0):b._values[u]=G}else f.push(u)}k(f,l);l=f}return m}function P(a,
b,c,f){for(var e in c){e in a||p(15013,[f?f.name:"n/a",e]);var h=c[e];a[e]&&d(a[e].type)&&!c.hasOwnProperty(e)||(h=b(e,h,f&&f._idKey===e),0<h.length&&p(15011,[f?f.name:"n/a",e],h))}}function Q(b,c,f,e){var h=b.schema||b._model.schema,k=[],l;for(l in c)if(!f||-1===a.inArray(l,f)){var q=b._values[l],u=c[l];if(h[l]&&h[l].depend)q!==u&&p(15012,[b._model?b._model.name:"n/a",l]);else{var G=h[l]&&h[l].type;d(G)&&(null==u?(u=[],b._nullProps[l]=!0):b._nullProps[l]=!1);if(G&&G.match(/string|number|integer|boolean/)){var r=
u;if(F(r)){for(var r=r.slice(0),u=0,E=r.length;u<E;u++)r[u]=r[u]&&"object"===typeof r[u]?r[u]&&r[u].valueOf&&r[u].valueOf():r[u];u=r}else u=r&&"object"===typeof r&&r.valueOf?r.valueOf():r}if(null!=u&&G&&G.match(/number|integer/)&&"number"!==typeof u)if(F(u)||g.core.data.isObservableArray(u))for(r=0,E=u.length;r<E;r++)null!=u[r]&&m(u[r])&&(u[r]=parseFloat(u[r]));else null!=u&&(u=parseFloat(u));d(G)&&q&&q.equals(u)||q===u||n(q)&&n(u)||(G&&-1!==G.indexOf("[]")&&g.core.data.isObservableArray(q)&&(q=q.toArray()),
k.push({p:l,o:q,n:u}))}}if(k.length){c={};f=[];r=0;for(l=k.length;r<l;r++)q=k[r],h[q.p]&&d(h[q.p].type)?q.n&&b._values[q.p].copyFrom(q.n):b._values[q.p]=q.n,c[q.p]={oldValue:q.o,newValue:b.get(q.p)},f.push(q.p);h={type:!0===e?"create":"change",target:b,props:c};a.extend(c,D(b,h,f,e));return h}}function W(a){var b=a._manager;a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function na(a,b,c){if(a._manager)for(var d=W(a),f=0,e=c.length;f<e;f++){var h=
c[f],k=h._values[a._idKey];d[k]||(d[k]=[]);d[k].push({type:b,item:h})}}function J(a,b){if(a._manager){var c=W(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]);c[d].push({type:2,ev:b})}}function M(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var f=b[d]?b[d].depend:null;if(f)for(var f=O(f.on),e=0,h=f.length;e<h;e++){var k=f[e];c[k]||(c[k]=[]);-1===a.inArray(d,c[k])&&c[k].push(d)}}return c}function X(b,c){q(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{};d=a.extend({},d,b.schema);r(d,!0,
c,!0);var f=z(d,!0,c);B(d,f,!0);return new da(d,b,f,c)}function u(b,c){var d=[],f=[],e=[],h;for(h in b)b[h]&&b[h].depend?f.push(h):d.push(h),b[h]&&b[h].type&&-1!==b[h].type.indexOf("[]")&&e.push(h);h=M(b);var k={},l;for(l in b){var g=b[l];if(!g||!g.depend){var n=null,n=g&&void 0!==g.defaultValue?g.defaultValue:null;k[l]=n}}return{_realProps:d,_dependProps:f,_aryProps:e,_dependencyMap:h,_createInitialValueObj:function(b){if(!b)return a.extend({},k);var c=a.extend({},k),d;for(d in b)c[d]=b[d];return c},
_validateItemValue:function(a,b,d){return c[a](b,d)}}}function C(b,c,d,f){var e=!1,h=["sort","reverse","pop","shift"],k=null;d.addEventListener("changeBefore",function(d){!f||!b._isRemoved&&f._manager||p(15005,[b._values[f._idKey],d.method]);var l=g.u.obj.argsToArray(d.args);if(-1===a.inArray(d.method,h)){var n=!0;switch(d.method){case "splice":n=!1;l.shift();l.shift();break;case "copyFrom":l=l[0];break;case "set":l.shift()}n&&(d=b._validateItemValue(c,l),0<d.length&&p(15011,c,d))}f?(f._manager&&
(d=f._manager,l=f.name,d._oldValueLogs||(d._oldValueLogs={}),d._oldValueLogs[l]||(d._oldValueLogs[l]={}),d=d._oldValueLogs[l],l=b._values[f._idKey],d[l]||(d[l]={}),d[l][c]||(d[l][c]=b._values[c].toArray())),(e=f._manager?f._manager.isInUpdate():!1)||f._manager.beginUpdate()):k=b._values[c].toArray()});d.addEventListener("change",function(a){if(!b._isInSet&&null!==a.method){var h={type:"change",target:b,props:{}};h.props[c]={};f?(J(f,h),e?a.stopImmediatePropagation():(f._manager._isArrayPropChangeSilentlyRequested=
!0,f._manager.endUpdate(),f._manager._isArrayPropChangeSilentlyRequested=!1)):d.equals(k)||(h.props[c]={oldValue:k,newValue:b._values[c]},b.dispatchEvent(h))}})}function la(a){ra(a)||p(15E3);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function da(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=d;for(var f in a)a[f]&&a[f].id&&(this._idKey=f);this._idType=(b=a[this._idKey].type)?"string"===b?"string":"number":"string";this.schema=a;
this._itemConstructor=K(a,c,this);d.models[this.name]=this}function K(b,c,d){function f(a){k(this,b,e,a);a=e._createInitialValueObj(a);P(b,e._validateItemValue,a,d);Q(this,a,null,!0);a=e._aryProps;for(var c=0,h=a.length;c<h;c++)C(this,a[c],this.get(a[c]),d)}var e=u(b,c);d._schemaInfo=e;g.mixin.eventDispatcher.mix(f.prototype);a.extend(f.prototype,e,S,{_model:d,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return f}function Y(a){}function R(){this.length=0;this._src=
[]}function U(){return new R}function T(a){return a&&a.constructor===R?!0:!1}var S={get:function(a){var b=this._model,c=b?b.schema:this.schema;if(0===arguments.length){var b={},d;for(d in c)b[d]=this._values[d];return b}c.hasOwnProperty(a)||p(15014,[b?b.name:"n/a",a]);return this._values[a]},set:function(a){var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);var c=this._model;!c||!this._isRemoved&&c._manager||p(15005,[this._values[this._model._idKey],"set"],this);if(c)c._idKey in b&&
b[c._idKey]!==this._values[c._idKey]&&p(15003,[c.name,this._idKey]),P(c.schema,c._schemaInfo._validateItemValue,b,c);else{var d=this.validate(b);if(d)throw d;}d=c?c._manager.isInUpdate():!1;c&&!d&&c._manager.beginUpdate();this._isInSet=!0;b=Q(this,b);this._isInSet=!1;c?(b&&J(c,b),d||c._manager.endUpdate()):b&&this.dispatchEvent(b)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;
return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};g.mixin.eventDispatcher.mix(la.prototype);a.extend(la.prototype,{createModel:function(b){b&&"object"===typeof b||p(15001,null,[l(15900)]);if(!F(b))return this.models[b.name]?this.models[b.name]:X(b,this);var c=b.length;c||p(15001,null,[l(15900)]);for(var d={},f=[],e=0;e<c;e++){var h=b[e].name;if(this.models[h])q[e]=manager.models[b.name];else try{f.push(h);h=[];b[e].base&&h.push(b[e].base.substring(1));for(var k in b[e].schema){var g=b[e].schema[k];
if(g){var n=g.type;n&&"@"===n.substring(0,1)&&(n=-1===n.indexOf("[]")?n.substring(1):n.substring(1,n.length-2),h.push(n))}}d[e]={depends:h}}catch(m){p(15001)}}for(var q={size:0};q.size<c;){k={};g=!1;for(e=0;e<c;e++)if(!d[e].registed){for(var h=d[e].depends,n=0,u=h.length;n<u;n++)if(!this.models[h[n]]){k[h[n]]=!0;break}n===u&&(q[e]=X(b[e],this),q.size++,g=!0,d[e].registed=!0)}if(!g){var e=!0,r;for(r in k)if(-1===a.inArray(r,f)){e=!1;break}e&&p(15004);p(15001,null,[l(15903,r)])}}b=[];for(e=0;e<c;e++)b.push(q[e]);
return b},dropModel:function(a){if((a=y(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(a){if(this.isInUpdate()){var b=!this._isArrayPropChangeSilentlyRequested,c=this._updateLogs,d=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;a={};for(var e in c)if(c.hasOwnProperty(e)){var h;
h=this.models[e];var k=c[e],l=[],g=[],m=[],q=[],u=void 0;for(u in k){for(var p=k[u],r=!0,w=[],x=p.length-1;0<=x;x--){var G=p[x],E=G.type;if(2===E)w.push(G.ev);else{a:{for(r=0;r<x;r++){var D=p[r].type;if(1===D||3===D){x=p[r];break a}}x=null}if(1===E)x&&3===x.type?l.push({id:u,oldItem:x.item,newItem:G.item}):g.push(G.item);else if(x=x&&3===x.type?x.item:x?null:G.item)q.push(x),x.dispatchEvent({type:"remove",model:h});r=!1;break}}if(r&&0<w.length){G={};for(x=w.length-1;0<=x;x--)for(var C in w[x].props)G[C]||
(T(h.get(u).get(C))?(E=d&&d[h.name]&&d[h.name][u]&&d[h.name][u][C],h.get(u).get(C).equals(E)||(G[C]={oldValue:E})):G[C]={oldValue:w[x].props[C].oldValue});x=!1;for(C in G)E=G[C].oldValue,p=h.get(u).get(C),(r=E===p)||(r=n(E)&&n(p)),r?delete G[C]:(x=h.get(u).get(C),b&&T(x)&&x.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),G[C].newValue=x,x=!0);x&&(w={type:"change",target:w[0].target,props:G},m.push(w),w.target.dispatchEvent(w))}}(h=0===g.length&&0===l.length&&0===q.length&&0===
m.length?!1:{created:g,recreated:l,removed:q,changed:m})&&(a[e]=h)}C=!1;for(e in a)C=!0,h=a[e],this.models[e].dispatchEvent(f(h.created,h.recreated,h.removed,h.changed));e={type:"itemsChange",models:a};C&&this.dispatchEvent(e)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});g.mixin.eventDispatcher.mix(da.prototype);a.extend(da.prototype,{create:function(a){this._manager||p(15006,[this.name,"create"]);var b=
this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var c=[],d=O(a),f=[],e=this._idKey,h=0,k=d.length;h<k;h++){var l=d[h],g=l[e],n=this._findById(g);n?(f.push(n),(g=Q(n,l,[e]))&&J(this,g)):(l=new this._itemConstructor(l),this.items[g]=l,this.size++,c.push(l),f.push(l))}0<c.length&&na(this,1,c);b||this._manager.endUpdate();return F(a)?f:f[0]},validate:function(a,b){try{var c=this._idKey,d=O(a);"object"===typeof a||F(a)||p(15007);if(b)for(var f=
0,e=d.length;f<e;f++){var h=d[f],k=h[c];""!==k&&null!=k||p(15002,[this.name,c]);var l=this._schemaInfo._createInitialValueObj(h);P(this.schema,this._schemaInfo._validateItemValue,l,this)}else for(var f=0,g=d.length;f<g;f++)h=d[f],P(this.schema,this._schemaInfo._validateItemValue,h,this)}catch(n){return n}return null},get:function(a){if(F(a)||g.core.data.isObservableArray(a)){for(var b=[],c=0,d=a.length;c<d;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||
p(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=this._idKey,d=O(a),f=[],e=[],h=0,k=d.length;h<k;h++)if(this.has(d[h])){var l=y(d[h])||v(d[h],!0)?d[h]:d[h]._values[c],g=this.items[l];delete this.items[l];this.size--;e.push(g);g._model&&(g._isRemoved=!0);f.push(g)}else e.push(null);0<f.length&&na(this,3,f);b||this._manager.endUpdate();return F(a)?e:e[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},
has:function(a){return y(a)||v(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&H(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return"undefined"===typeof a?null:a},_dispatchItemsChangeEvent:function(a){a=f([],[],[],[a]);this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},
createQuery:fa.data.createQuery});g.mixin.eventDispatcher.mix(Y.prototype);a.extend(Y.prototype,S,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);P(this.schema,this._validateItemValue,b)}catch(c){return c}return null}});g.mixin.eventDispatcher.mix(R.prototype);var N={equals:function(a){var b=T(a);if(!b&&!F(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var c=0;c<b;c++){var d=this[c],f=a[c],e;(e=d===f)||(e=n(d)&&n(f));if(!e)return!1}return!0},
copyFrom:function(a){null==a&&(a=[]);a=T(a)?a._src:a;F(a)||p(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=g.u.obj.argsToArray(arguments),b=0,c=a.length;b<c;b++)T(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},aa="concat join pop push reverse shift slice sort splice unshift indexOf lastIndexOf every filter forEach map some reduce reduceRight".split(" "),
ba;for(ba in N)N.hasOwnProperty(ba)&&-1===a.inArray(ba,aa)&&aa.push(ba);var Va=["concat","slice","splice","filter","map"],Xa=["reverse","sort"],G="sort reverse pop shift unshift push splice copyFrom set".split(" ");ba=0;for(var Na=aa.length;ba<Na;ba++){var E=aa[ba];R.prototype[E]=function(b){function c(){var f=d.apply(this._src,arguments);if(-1!==a.inArray(b,Xa))f=this;else if(-1!==a.inArray(b,Va)){var e=U();e.copyFrom(f);f=e}return f}var d=N[b]?N[b]:Array.prototype[b];return-1===a.inArray(b,G)?c:
function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(E)}g.u.obj.expose("h5.core.data",{createManager:function(a,b){ra(a)||p(15E3);var c=new la(a);if(null!=b){""===b&&(b="window");var d={};d[a]=c;g.u.obj.expose(b,d)}return c},createObservableArray:U,createObservableItem:function(a){r(a,!1,null,!0);var b=z(a);B(a,b,!0);var c=new Y,
b=u(a,b);k(c,a,b);c.schema=a;for(var d in b)c[d]=b[d];d=b._createInitialValueObj();P(a,b._validateItemValue,d);Q(c,d,null,!0);a=0;for(b=c._aryProps.length;a<b;a++)C(c,c._aryProps[a],c.get(c._aryProps[a]));return c},isObservableArray:T,isObservableItem:function(a){return!(!(a&&a.constructor&&a._validateItemValue)||H(a.getModel))},createSequence:function(b,c,d){function f(){return g}function e(){var a=g;g+=n;return a}function h(){return g.toString()}function k(){var a=g;g+=n;return a.toString()}function l(){}
var g=null!=b?b:1,n=null!=c?c:1;b=1===d?{current:h,next:k,returnType:1}:{current:f,next:e,returnType:2};b.setCurrent=function(a){g=a};a.extend(l.prototype,b);return new l},SEQ_STRING:1,SEQ_INT:2})})();(function(){function e(c){return g.u.obj.isJQueryObject(c)?c:a(c)}function c(){this.__cachedTemplates={}}var n=g.async.deferred,m={escapeHtml:function(a){return g.u.str.escapeHtml(a)}};a.extend(c.prototype,{load:function(c){var e=n(),m=null;switch(a.type(c)){case "string":a.trim(c)||p(7004);m=[c];break;
case "array":m=c;0===m.length&&p(7004);c=0;for(var v=m.length;c<v;c++)y(m[c])?a.trim(m[c])||p(7004):p(7004);break;default:p(7004)}v=[];c=0;for(var b=m.length;c<b;c++)v.push(g.res.get(m[c]));var h=this;ka(v,function(a){a=F(a)?a:[a];for(var b=[],c,l=0,f=a.length;l<f;l++){for(var g=a[l].templates,n=0,m=g.length;n<m;n++){if(!h.isValid(g[n].content)){c=g[n];break}b.push(g[n])}if(c)break}if(c)try{h.register(c.id,c.content)}catch(q){return q.detail.url=a[l].url,q.detail.path=a[l].path,e.reject(q)}l=0;for(f=
b.length;l<f;l++)h.register(b[l].id,b[l].content);e.resolve()},function(a){e.reject(a)});return e.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,e){"string"!==a.type(e)?p(7E3,null,{id:c}):y(c)&&a.trim(c)||p(7002,[]);try{var g=new EJS.Compiler(e,"[");g.compile();this.__cachedTemplates[c]=g.process}catch(n){g=n.lineNumber,p(7010,[g?" line:"+g:"",n.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),
!0}catch(c){return!1}},get:function(c,e){var g=this.__cachedTemplates;y(c)&&a.trim(c)||p(7002);(g=g[c])||p(7005,c);var n=e?a.extend(!0,{},e):{},b=n.hasOwnProperty("_h")?new EJS.Helpers(n):new EJS.Helpers(n,{_h:m}),h=null;try{h=g.call(n,n,b)}catch(v){p(7006,v.toString(),v)}return h},update:function(a,c,g){return e(a).html(this.get(c,g))},append:function(a,c,g){return e(a).append(this.get(c,g))},prepend:function(a,c,g){return e(a).prepend(this.get(c,g))},isAvailable:function(a){return!!this.__cachedTemplates[a]},
clear:function(c){if("undefined"===typeof c)this.__cachedTemplates={};else{var e=null;switch(a.type(c)){case "string":e=[c];break;case "array":c.length||p(7002);e=c;break;default:p(7002)}c=0;for(var g=e.length;c<g;c++){var n=e[c];y(n)&&a.trim(n)||p(7002)}c=0;for(g=e.length;c<g;c++)delete this.__cachedTemplates[e[c]]}},bind:function(c,e){var n;null==c&&p(7007);F(c)?n=c:(n=a(c),0===n.length&&p(7007),n=n.toArray());(null==e||"object"!==typeof e||F(e)||g.core.data.isObservableArray(e))&&p(7009);return fa.view.createBinding(n,
e)}});var v=new c;v.createView=function(){return new c};a(function(){a('script[type\x3d"text/ejs"]').each(function(){var c=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),v.__cachedTemplates[c]=e.process)})});g.u.obj.expose("h5.core",{view:v})})();(function(){function e(a,b){return a&&1===a.nodeType?a.getAttribute(b):void 0}function c(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function n(a,b,c,d){var f=[];b=O(b);
if(!0===d)return m(f,a,b,c),f;a=a.childNodes;d=0;for(var e=a.length;d<e;d++)m(f,a[d],b,c);return f}function m(a,b,c,d){if(1===b.nodeType){for(var f=0,e=c.length;f<e;f++){var h=b.getAttribute(c[f]);if("undefined"===typeof d){if(null!==h){a.push(b);break}}else if(null!==h&&h==d){a.push(b);break}}if(0<b.childNodes.length)for(b=b.childNodes,f=0,e=b.length;f<e;f++)m(a,b[f],c,d)}}function v(b,c){b=O(b);for(var d=[],f=0,h=b.length;f<h;f++){var k=b[f];if(1===k.nodeType&&(!0!==c||null==e(k,"data-h5-context")&&
null==e(k,"data-h5-loop-context")))for(var l=n(k,"data-h5-bind",void 0,!0),g=0,m=l.length;g<m;g++){for(var p=!0,q=l[g];null!=q&&q!==k;q=q.parentNode)if(null!=e(q,"data-h5-context")||null!=e(q,"data-h5-loop-context")){p=!1;break}p&&d.push(l[g])}}return a(d)}function q(b,c,d){for(var f=[],h=0,k=b.length;h<k;h++){var l=b[h];if(1===l.nodeType){if(!0===d){if(null!=l.getAttribute(c)){f.push(l);continue}if(null!=e(l,"data-h5-context")||null!=e(l,"data-h5-loop-context"))continue}for(var g=n(l,c,void 0,!1),
m=0,p=g.length;m<p;m++){var q=a(g[m])[0],r=q.parentNode;(null==e(r,"data-h5-context")&&null==e(r,"data-h5-loop-context")||r===l)&&f.push(q)}}}return a(f)}function r(a){return a&&a.addEventListener&&a.getModel&&!F(a)&&!g.core.data.isObservableArray(a)||g.core.data.isObservableItem(a)?!0:!1}function B(a,b){for(var c=0,d=a.length;c<d;c++){var f=a[c];1===f.nodeType&&f.setAttribute("data-h5-dyn-vid",b)}}function z(d,f,h){var k=W++,l=f[0];a(l).empty();if(h){F(h)||g.core.data.isObservableArray(h)||p(7102);
B(f,k);d._addBindingEntry(h,l,k);g.core.data.isObservableArray(h)&&!d._isWatching(h)&&(f=function(a){d._observableArray_changeListener(a)},d._listeners[d._getContextIndex(h)]=f,h.addEventListener("change",f));f=e(l,"data-h5-dyn-ctx");f=c(d._getSrcCtxNode(f).childNodes);var n=[];d._loopElementsMap[k]=n;for(var k=l.ownerDocument.createDocumentFragment(),m=h.get?function(a){return h.get(a)}:function(a){return h[a]},q=0,r=h.length;q<r;q++){for(var v=[],D=0,P=f.length;D<P;D++){var Q=X(f[D]);v.push(Q);
k.appendChild(Q)}n[q]=v;l.appendChild(k);b(d,v,m(q),!1,!0)}}}function b(a,b,c,d,f){b=O(b);if(d)z(a,b,c);else{d=W++;c&&(("object"!==typeof c||F(c)||g.core.data.isObservableArray(c))&&p(7102),B(b,d),a._addBindingEntry(c,b,d));var e=r(c);e&&!a._isWatching(c)&&(d=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=d,c.addEventListener("change",d));v(b,f).each(function(){A(this,c,e)});h(a,b,c,!1,f);h(a,b,c,!0,f)}}function h(a,c,d,f,h){var k=f?"data-h5-loop-context":"data-h5-context";
q(c,k,h).each(function(){var c=e(this,k),h=null;d&&(h=r(d)?d.get(c):d[c]);b(a,this,h,f)})}function A(b,c,d){for(var f=e(b,"data-h5-bind").split(";"),h=[],k=[],l=[],g=0,n=f.length;g<n;g++){var m=f[g];if(-1===m.indexOf(":"))0<a.trim(m).length&&(h.push(null),k.push(null),l.push(a.trim(m)));else{var q=m.split(":"),m=a.trim(q[0]),q=a.trim(q[1]),r=null,v=P.exec(m);v&&(r=v[1],m=/(\S+)[\s\(]/.exec(m)[1]);0<m.length&&0<q.length&&(h.push(m),k.push(r),l.push(q))}}f=b.tagName.toLowerCase();g=a(b);n=0;for(m=h.length;n<
m;n++){var r=h[n],v=k[n],D=l[n],q=null;c&&(q=d?c.get(D):c[D]);null==r&&("input"===f?(r="attr",v="value"):r="text");switch(r){case "text":null==q?g.text(""):g.text(q);break;case "html":null==q?g.html(""):g.html(q);break;case "class":var r=e(b,"data-h5-dyn-cn"),D=(v=null==r)?"":" ",Q=!1;q&&(Q=!(new RegExp("\\s"+q+"\\s")).test(" "+r+" "));g[0].className=(v?"":r)+(Q?D+q:"");break;case "attr":v||p(7100);"input"===f&&"value"===v?null==q?g.val(""):g.val(q):null==q?g.removeAttr(v):g.attr(v,q);break;case "style":v||
p(7100);null==q?g.css(v,""):g.css(v,q);break;default:p(7101)}}}function k(a,b,c){for(var d=0,f=c.length;d<f;d++){var e=c[d];b.removeChild(e);a._removeBinding(e)}}function d(a){a=a.childNodes;for(var b=[],c=0,d=a.length;c<d;c++)b.push(X(a[c]));return b}function l(a,c,f,e,h){for(var k=f.ownerDocument.createDocumentFragment(),l=[],g=0,n=h.length;g<n;g++){var m=d(f);l[g]=m;for(var q=0,p=m.length;q<p;q++)k.appendChild(m[q]);b(a,m,h[g])}Array.prototype[e].apply(c,l);return k}function f(a,c,f,e,h,l){var g=
e.length;if(0!==g){var n=e[0],m=n;for(f=1===g?f.length:m+e[1];m<f;m++){var q=h[m];q&&k(a,c,q)}h.splice(n,e[1]);if(!(2>=g)){m=h.length;m=0===m||0===n?c.firstChild:n>=m?null:h[n][0];f=l.ownerDocument.createDocumentFragment();n=[n,0];for(q=2;q<g;q++){for(var p=d(l),r=0,v=p.length;r<v;r++)f.appendChild(p[r]);b(a,p,e[q]);n.push(p)}c.insertBefore(f,m);Array.prototype.splice.apply(h,n)}}}function D(a,d){void 0!==a.nodeType?1===a.nodeType&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,
this._targets=c(a));this._bindRootId=y++;J[this._bindRootId]=this;for(var f=[],h=0,k=this._targets.length;h<k;h++){var l=this._targets[h];if(1===l.nodeType){l.setAttribute("data-h5-dyn-bind-root",this._bindRootId);for(var g=n(l,["data-h5-context","data-h5-loop-context"],void 0,!0),m=0,q=g.length;m<q;m++){var p=Q++;g[m].setAttribute("data-h5-dyn-ctx",p)}g=n(l,"data-h5-bind",void 0,!0);m=0;for(q=g.length;m<q;m++)p=g[m],/class\s*:/.test(e(p,"data-h5-bind"))&&""!=p.className&&p.setAttribute("data-h5-dyn-cn",
p.className)}f.push(l.cloneNode(!0))}this._srces=f;this._loopElementsMap={};this._rootContext=d;this._usingContexts=[];this._srcToViewMap={};this._listeners={};b(this,this._targets,this._rootContext,!1,!0)}var P=/\(\s*(\S+)\s*\)/,Q=0,W=0,y=0,J={},M={},X;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=void 0;d?(c.h5Dummy=void 0,X=function(b){var c=b.ownerDocument;return 1===b.nodeType?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):X=
function(a){return a.cloneNode(!0)}})();a.extend(D.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(1===c.nodeType){this._removeBinding(c);c.removeAttribute("data-h5-dyn-bind-root");for(var d=n(c,"data-h5-dyn-cn",void 0,!0),f=0,e=d.length;f<e;f++)d[f].removeAttribute("data-h5-dyn-cn");c=n(c,"data-h5-dyn-ctx",void 0,!0);f=0;for(d=c.length;f<d;f++)c[f].removeAttribute("data-h5-dyn-ctx")}}delete J[this._bindRootId]},_observableArray_changeListener:function(a){var c=
this._getViewsFromSrc(a.target);if(c)for(var h in c)if(c.hasOwnProperty(h)){var g=c[h],n=this._getSrcCtxNode(e(g,"data-h5-dyn-ctx")),m=this._loopElementsMap[h];switch(a.method){case "set":f(this,g,a.target,[a.args[0],1,a.args[1]],m,n);break;case "shift":case "pop":var q=m[a.method]();q&&k(this,g,q);break;case "unshift":q=l(this,m,n,a.method,a.args);g.insertBefore(q,g.firstChild);break;case "push":q=l(this,m,n,a.method,a.args);g.appendChild(q);break;case "splice":f(this,g,a.target,a.args,m,n);break;
case "reverse":for(var q=g,p=m;q.firstChild;)q.removeChild(q.firstChild);for(var r=0,g=p.length;r<g;r++)for(var n=p[r],v=n.length-1;0<=v;v--)q.insertBefore(n[v],q.firstChild);m.reverse();break;case "sort":case "copyFrom":case null:for(var q=this._loopElementsMap,p=h,r=a.target,v=m,m=n,n=0,D=v.length;n<D;n++)k(this,g,v[n]);for(var v=g.ownerDocument.createDocumentFragment(),D=[],n=0,Q=r.length;n<Q;n++){var P=d(m);D[n]=P;for(var A=0,W=P.length;A<W;A++)v.appendChild(P[A]);b(this,P,r.get(n))}g.appendChild(v);
q[p]=D}}},_observableItem_changeListener:function(a){var c=this._getViewsFromSrc(a.target);if(c){var d=!1;a.target===this._rootContext&&(d=!0);var f=this,h;for(h in c)if(c.hasOwnProperty(h)){var k=c[h];v(k,d).each(function(){A(this,a.target,!0)});q(k,"data-h5-context").each(function(){var c=e(this,"data-h5-context");if(!(c in a.props))return!0;f._removeBinding(this);var d=e(this,"data-h5-dyn-ctx"),d=f._getSrcCtxNode(d),d=X(d);this.parentNode.replaceChild(d,this);b(f,d,a.props[c].newValue)});q(k,"data-h5-loop-context").each(function(){var c=
e(this,"data-h5-loop-context");if(!(c in a.props)||a.target._isArrayProp(c))return!0;f._removeBinding(this);b(f,this,a.props[c].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,c=this._srces.length;b<c;b++){var d=this._srces[b];if(e(d,"data-h5-dyn-ctx")===a)return d;d=n(d,"data-h5-dyn-ctx",a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},
_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);M[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=M[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,r(b)?(b.removeEventListener("change",
this._listeners[c]),d=!0):g.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}M[a]&&delete M[a]}},_removeBinding:function(a){if(1===a.nodeType){var b=e(a,"data-h5-dyn-vid");null!=b&&(this._removeBindingEntry(b),a.removeAttribute("data-h5-dyn-vid"));a=n(a,"data-h5-dyn-vid");for(var b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(e(d,"data-h5-dyn-vid"));d.removeAttribute("data-h5-dyn-vid")}}},
_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});fa.view={createBinding:function(a,b){return new D(a,b)}}})();(function(){function e(a,c){return null==a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!c&&(a instanceof Number||!(!(y(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function c(a,c){return!!(null==a||y(a)||!c&&a instanceof String)}function n(a,c){return null==a||"boolean"===typeof a||!c&&a instanceof Boolean}
function m(b){var c=b.name;b.isValid?(this.validProperties.push(c),this.validCount++):(this.isValid=!1,this.invalidProperties.push(c),this.invalidCount++,this.invalidReason=this.invalidReason||{},this.invalidReason[c]={name:c,value:b.value,violation:[b.violation]});this.validatingProperties.splice(a.inArray(c,this.validatingProperties),1);this.isValid&&this.validatingProperties.length||(this.isAllValid=this.isValid)}function p(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=
a.invalidProperties;this.validatingProperties=a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=a.invalidProperties.length;this.isAsync=a.isAsync;this.isAllValid=a.isAllValid;this.properties=a.properties;this.addEventListener("validate",m);this.dispatchEvent=function(){this._aborted||p.prototype.dispatchEvent.apply(this,arguments)}}function q(){this.rules=[];this.rulesMap={}}function r(a,c,e,k){z.addValidateRule(a,c,e,k)}var B=g.async.isPromise,
z=new q;g.mixin.eventDispatcher.mix(p.prototype);p.prototype.abort=function(){this.removeEventListener("validate",m);this.dispatchEvent({type:"abort"});this._aborted=!0};a.extend(q.prototype,{addValidateRule:function(a,c,e,k){if(this.rulesMap[a])for(var d=0,l=this.rules.length;d<l;d++)if(this.rules[d].ruleName===a){this.rules.splice(d,1);break}c={ruleName:a,func:c,priority:k,argNames:e};this.rules.push(c);this.rulesMap[a]=c},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},
getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var c=this.rulesMap;a.sort(function(a,b){var d=c[a],e=c[b],d=null==d.priority?-Infinity:d.priority,e=null==e.priority?-Infinity:e.priority;return d===e?0:e-d})}});r("required",function(a){return null!=a&&""!==a},null,51);r("customFunc",function(a,c){return c(a)},["func"],50);r("assertNull",function(a){return null==a},null,50);r("assertNotNull",function(a){return void 0===a?!0:null!=a},
null,50);r("assertFalse",function(a){return null==a||n(a)&&0==a},null,50);r("assertTrue",function(a){return null==a||n(a)&&1==a},null,50);r("max",function(a,c,g){return null==a||(e(a,!0)||a instanceof Number)&&(g?a<=c:a<c)},["max","inclusive"],50);r("min",function(a,c,g){return null==a||(e(a,!0)||a instanceof Number)&&(g?c<=a:c<a)},["min","inclusive"],50);r("future",function(a){return null==a||a instanceof Date&&(new Date).getTime()<a.getTime()},null,50);r("past",function(a){return null==a||a instanceof
Date&&a.getTime()<(new Date).getTime()},null,50);r("digits",function(a,e,g){if(null==a)return!0;if(!c(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var k=parseInt(a);return null!=e&&(0>k?-k:k)>=Math.pow(10,e)?!1:null!=g?(e=a.indexOf("."),-1===e?!0:a.slice(e+1).length<=g):!0},["integer","fraction"],50);r("pattern",function(a,e){return null==a||c(a)&&e.test(a)},["regexp"],50);r("size",function(b,e,g){e=e||0;g=g||Infinity;if(a.isPlainObject(b)){var k=0,d;for(d in b)k++;return e<=k&&k<=g}return null==
b||(c(b)||F(b))&&e<=b.length&&b.length<=g},["min","max"],50);g.u.obj.expose("h5.validation",{defineRule:r});g.core.expose({__name:"h5.validation.FormValidationLogic",_rule:{},_disableProperties:[],validate:function(b,c){var e={},k=[],d;for(d in b){if(a.isPlainObject(b[d]))for(var l in b[d])e[l]=b[d][l],k.push(l);e[d]=b[d]}d=null;c&&(d=(a.isArray(c)?c.slice(0):[c]).concat(k));return this._validate(e,d)},addRule:function(a){for(var c in a)this._rule[c]=a[c]},removeRule:function(a){F(a)||delete this._rule[a];
for(var c=0,e=a.length;c<e;c++)delete this._rule[a[c]]},disableRule:function(b){b=O(b);for(var c=0,e=b.length;c<e;c++)-1===a.inArray(b[c],this._disableProperties)&&this._disableProperties.push(b[c])},enableRule:function(b){b=O(b);for(var c=0,e=b.length;c<e;c++){var k=a.inArray(b[c],this._disableProperties);-1!==k&&this._disableProperties.splice(k,1)}},_validate:function(b,c){var e=[],k=[],d=[],l=[],f=null,g=c&&(F(c)?c:[c]),n=!1,m={},q;for(q in this._rule)if(!(c&&-1===a.inArray(q,g)||-1!==a.inArray(q,
this._disableProperties))){var r=this._rule[q],J=b[q],M=!1,y=!1,u=[],C;for(C in r)u.push(C);z.sortRuleByPriority(u);for(var H=0,O=u.length;H<O;H++){C=u[H];var K=r[C];if(b.hasOwnProperty(q)&&null!=K||"required"===C&&K){var Y=this._convertBeforeValidate?this._convertBeforeValidate(J,C):J,K=F(K)?[Y].concat(K):[Y,K],R=z.getValidateFunction(C);if(!R)break;var R=R.apply(this,K),U={},T=z.getValidateArgNames(C);if(T)for(var S=0,N=T.length;S<N;S++)U[T[S]]=K[S+1];!B(R)||wa(R)||Ba(R)||(y=!0,m[q]=m[q]||[],m[q].push(R.promise({ruleName:C,
value:Y,ruleValue:U})));if(!R||B(R)&&wa(R))f=f||{},f[q]||(f[q]={name:q,value:J,violation:[]}),f[q].violation.push(this._createViolation(C,U)),M=!0}}y?(n=!0,l.push(q)):(M?k:e).push(q);d.push(q)}var g=!k.length,aa=new p({validProperties:e,invalidProperties:k,validatingProperties:l,properties:d,invalidReason:f,isAsync:n,isValid:g,isAllValid:g?n?null:!0:!1});if(n){var ba=function(a){a.validCount+a.invalidCount===a.properties.length&&(a.isAllValid=a.isValid,a.dispatchEvent({type:"validateComplete"}))},
V=this;for(q in m)e=m[q],k=function(a){return function(){aa.dispatchEvent({type:"validate",name:a,isValid:!0,value:b[a]});ba(aa)}}(q),d=function(b,c,d){return function(){if(-1===a.inArray(b,aa.invalidProperties)){for(var d,f,e,h=0,k=c.length;h<k;h++){var l=c[h];if(wa(l)){d=l.ruleName;f=l.ruleValue;e=l.value;break}}aa.dispatchEvent({type:"validate",name:b,isValid:!1,value:e,violation:V._createViolation(d,f,arguments)});ba(aa)}}}(q,e),a.when.apply(a,e).done(k).fail(d)}return aa},_createViolation:function(a,
c,e){a={ruleName:a,ruleValue:c};e&&(a.reason=g.u.obj.argsToArray(e));return a},_convertBeforeValidate:function(a,c){if(null==a)return a;switch(c){case "max":case "min":return e(a)?parseFloat(a):NaN;case "future":case "past":return new Date(a)}return a}})})();(function(){function e(b){var c={},d;for(d in C){var f=a("\x3cdiv\x3e\x3c/div\x3e").addClass(b).addClass(d).appendTo("body"),e=a.camelCase(d);c[e]={};a.map(C[d],function(a,b){c[e][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),
10):f.css(a)});f.remove()}return c}function c(a,b,c){a=b.createElement("v:"+a);for(var d in c)a.style[d]=c[d];return a}function n(a,b){for(var c=[],d=a/2,f=.8*a/2,e=360/b*Math.PI/180,h=1;h<=b;h++){var k=e*h,l=Math.cos(k),k=Math.sin(k);c.push({from:{x:d+f/2*l,y:d+f/2*k},to:{x:d+f*l,y:d+f*k}})}return c}function m(a){return function(){var b=document.body,c=document.documentElement,d=K?b:Y?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+
a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function p(a){return function(){var b=K?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function q(a){var b=K?document.body:document.documentElement;return M.isiOS?window["inner"+a]:b["client"+a]}function r(b){var c=a(b)[0],d=document.body,f=a("html")[0];b={top:0,left:0};if(c===d&&Y)return{top:parseFloat(f.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||
0),left:parseFloat(f.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=K?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+aa()-c,left:b.left+ba()-d}}function B(){a.each(u(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",
function(){return!1})})}function z(a){a=X(a)?a[0]:a;return a===window||a===document||a===document.body}function b(a){return ea(V(a)).getComputedStyle(a,null)}function h(c,d){return ea(V(c)).getComputedStyle?b(c)[d]:a(c).css(d)}function A(c){if(!ea(V(c)).getComputedStyle)return a(c).height();var d=b(c);return c.offsetHeight-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)}function k(c){if(!ea(V(c)).getComputedStyle)return a(c).width();var d=b(c);return c.offsetWidth-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)}
function d(c,d){if(!ea(V(c)).getComputedStyle)return a(c).outerHeight();var f=b(c);return A(c)+parseFloat(f.paddingTop)+parseFloat(f.paddingBottom)+parseFloat(f.borderTopWidth)+parseFloat(f.borderBottomWidth)+(d?parseFloat(f.marginTop)+parseFloat(f.marginBottom):0)}function l(c,d){if(!ea(V(c)).getComputedStyle)return a(c).outerWidth();var f=b(c);return k(c)+parseFloat(f.paddingLeft)+parseFloat(f.paddingRight)+parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)+(d?parseFloat(f.marginLeft)+
parseFloat(f.marginRight):0)}function f(c){if(!ea(V(c)).getComputedStyle)return a(c).innerHeight();var d=b(c);return A(c)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)}function D(c){if(!ea(V(c)).getComputedStyle)return a(c).innerWidth();var d=b(c);return k(c)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}function P(c,d,f,e){function h(){k+=13;k>f?(clearInterval(n),d.each(function(a){for(var b in c[a])this.style[b]=""}),e()):d.each(function(b){var c=l[b],d;for(d in c)c[d]+=g[b][d];a(this).css(c)})}
var k=0,l=[],g=[];d.each(function(a){var e=c[a];g[a]={};l[a]={};var h=b(d[a]),k;for(k in e)l[a][k]=parseFloat(h[k]),g[a][k]=13*(parseFloat(e[k])-parseFloat(h[k]))/f});h();var n=setInterval(h,13)}function Q(a,b,c){var d=[];a.each(function(){var a=parseFloat(h(this,"opacity"));d.push({opacity:a})});a.css({opacity:0,display:"block"});P(d,a,b,c)}function W(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});P(d,a,b,c)}function na(b,d){this.style=a.extend(!0,{},b);if(!d.getElementById("h5-vmlstyle")){d.namespaces.add("v",
"urn:schemas-microsoft-com:vml");var f=d.createElement("style");d.getElementsByTagName("head")[0].appendChild(f);f.id="h5-vmlstyle";f.setAttribute("type","text/css");f.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}f=this.style.throbber.width;this.group=c("group",d,{width:f+"px",height:this.style.throbber.height+"px"});this.group.className="vml-root";for(var f=n(f,this.style.throbber.lines),e=this.style.throbberLine.color,h=this.style.throbberLine.width,k=0,l=
f.length;k<l;k++){var g=f[k],m=g.from,q=g.to,g=c("line",d);g.strokeweight=h;g.strokecolor=e;g.fillcolor=e;g.from=m.x+","+m.y;g.to=q.x+","+q.y;m=c("stroke",d);m.opacity=1;g.appendChild(m);this.group.appendChild(g)}this._createPercentArea(d)}function J(b,c){var d=this,f=a(b);if(f.length){var h=z(f),f=h?a("body"):f,k=V(f[0]);k===window.document||f[0]!==k&&ea(k)!==f[0]||(f=a(k.body));var l=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},c);
this._displayed=!1;this._throbbers=[];this._settings=l;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(l.theme));l.throbber&&a.extend(this._styles.throbber,l.throbber);this._isScreenLock=h;this._$target=f;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){d._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){d._handleResizeEvent()};this._redrawable=
!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof l.fadeIn?l.fadeIn:-1;this._fadeOutTime="number"===typeof l.fadeOut?l.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=l.showThrobber||l.message;for(var f=g.u.str.format('\x3cspan class\x3d"indicator-throbber"\x3e\x3c/span\x3e\x3cspan class\x3d"indicator-message" {0}\x3e{1}\x3c/span\x3e',""===l.message?'style\x3d"display: none;"':"",l.message),h="https"===document.location.protocol?"return:false":
"about:blank",n=0,m=this._$target.length;n<m;n++)this._$content=this._$content.add(a(k.createElement("div")).append(f).addClass("h5-indicator").addClass(l.theme).addClass("content").css("display","none")),this._$overlay=this._$overlay.add((l.block?a(k.createElement("div")):a()).addClass("h5-indicator").addClass(l.theme).addClass("overlay").css("display","none")),this._$skin=this._$skin.add((Y||K?a(k.createElement("iframe")):a()).attr("src",h).addClass("h5-indicator").addClass("skin").css("display",
"none"));var q=this._isScreenLock&&R?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",q)});k=l.promises;l=function(){d.hide()};f=a.hasOwnProperty("curCSS")?"pipe":"then";F(k)?(k=a.map(k,function(a,b){return a&&H(a.promise)?a:null}),0<k.length&&Ea(g.async.when(k),f,[l,l])):k&&H(k.promise)&&Ea(k,f,[l,l])}}var M=g.env.ua,X=g.u.obj.isJQueryObject,u=g.u.obj.argsToArray,C={throbber:["width","height"],"throbber-line":["width","color"]},O=!!document.createElement("canvas").getContext,
da=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='\x3cv:line strokeweight\x3d"1"/\x3e';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),K="CSS1Compat"!==document.compatMode,Y=M.isIE&&6>=M.browserVersion,R=!(M.isAndroidDefaultBrowser||M.isiOS&&5>M.browserVersion||Y||K||M.isWindowsPhone),U=null,T=null,S=null,N=null,aa=null,ba=null,ja=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),
c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(f){f=a.camelCase(f);if(f in b.style)return!0;f=f.charAt(0).toUpperCase()+f.slice(1);for(var e=0;e<d;e++)if(c[e]+f in b.style)return!0;return!1}}(),T=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:K?b["client"+a]:c["client"+a]}}("Height"),S=m("Height"),N=m("Width"),aa=p("Top"),ba=p("Left"),U=ja("animationName");na.prototype={show:function(a){a&&(this.root=
a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,f=0,e=d.length;f<e;f++){var h=d[f];if("textbox"!==h.nodeName){var k=f+1;h.firstChild.opacity=k==c?"1":k==c+1||k==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var l=this;this._runId=
setTimeout(function(){l._run.call(l)},Math.floor(b/a))}},_createPercentArea:function(b){var d=c("textbox",b);b=a(b.createElement("table"));b.append("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e");var f=b.find("td");f.width(this.group.style.width);f.height(this.group.style.height);f.css("line-height",this.group.style.height);f.addClass("throbber-percent");d.appendChild(b[0]);this.group.appendChild(d)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var fa=function(b,c){this.style=
a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,f=this.baseDiv,e=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.appendChild(d);e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";
e.style.lineHeight=this.style.throbber.height+"px";e.className="throbber-percent";f.appendChild(e);this.positions=n(d.width,this.style.throbber.lines)};fa.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,f=this.positions,
e=this.style.throbberLine.color,h=this.style.throbberLine.width,k=this.style.throbber.roundTime;b.width=b.width;for(var l=0,g=f.length;l<g;l++){c.beginPath();c.strokeStyle=e;c.lineWidth=h;var n=l+1;c.globalAlpha=n==d?1:n==d+1||n==d-1?.75:.4;var m=f[l],n=m.from,m=m.to;c.moveTo(n.x,n.y);c.lineTo(m.x,m.y);c.stroke()}d==a?d=0:d++;this.highlightPos=d;if(U)b.className="throbber-canvas";else{var q=this;this._runId=setTimeout(function(){q._run.call(q)},Math.floor(k/a))}}},setPercent:function(a){this.percentDiv.innerHTML=
a}};J.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children(".h5-indicator").length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(B(b._$overlay,b._$content),R||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},f=0,e=this._$target.length;f<e;f++){var k=this._$target.eq(f),l=this._$content.eq(f),g=
this._$skin.eq(f),n=this._$overlay.eq(f),m=this._settings,q=h(k[0],"position");this._isScreenLock||"static"!==q||(k.data("before-position",q),k.data("before-zoom",h(k[0],"zoom")),k.css({position:"relative",zoom:"1"}));var q=V(k[0]),p=null;m.showThrobber&&(p=O?new fa(this._styles,q):da?new na(this._styles,q):null);p&&(b._throbbers.push(p),b.percent(this._settings.percent),p.show(l.children(".indicator-throbber")[0]));k.append(g).append(n);this._showContent&&k.append(l)}f=this._$skin.toArray();Array.prototype.push.apply(f,
this._$content.toArray());Array.prototype.push.apply(f,this._$overlay.toArray());f=a(f);0>c?(f.css("display","block"),d()):Q(f,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&R||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<d;c++){var f=this._$content.eq(c),e=this._$overlay.eq(c);b=this._$target.eq(c);var h=this._$skin.eq(c);if(this._isScreenLock)f=N(),b=S();else{e.css("display","none");f.css("display","none");
var k=b[0];a=k.scrollWidth;b=k.scrollHeight;if(Y)a=Math.max(a,k.clientWidth),b=Math.max(b,k.clientHeight);else if(M.isIE&&"function"===typeof getComputedStyle){var k=ea(V(k)).getComputedStyle(k,null),l=parseFloat(k.width)+parseFloat(k.paddingLeft)+parseFloat(k.paddingRight);a+=l-parseInt(l)-1;k=parseFloat(k.height)+parseFloat(k.paddingTop)+parseFloat(k.paddingBottom);b+=k-parseInt(k)-1}e.css("display","block");f.css("display","block");f=a}e[0].style.width=f+"px";e[0].style.height=b+"px";if(Y||K)h[0].style.width=
f+"px",h[0].style.height=b+"px"}},_reposition:function(){for(var b=0,c=this._$target.length;b<c;b++){var e=this._$target.eq(b),g=this._$content.eq(b);if(this._isScreenLock){var n=T();R?g.css("top",(n-d(g[0]))/2+"px"):g.css("top",aa()+n/2-d(g[0])/2+"px")}else g.css("top",e.scrollTop()+(f(e[0])-d(g[0]))/2);var n=D(g[0])-k(g[0]),m=0;g.children().each(function(){var b=a(this);if("none"===h(b[0],"display"))return!0;m+=l(this,!0)});g.css("width",m+n);g.css("left",e.scrollLeft()+(D(e[0])-l(g[0]))/2)}},hide:function(){if(!this._displayed)return this;
this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var f=a(d),d=function(){var c=a(window);f.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);
c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},e=0,k=this._throbbers.length;e<k;e++)this._throbbers[e].hide();0>c?(f.css("display","none"),d()):W(f,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);
return this},message:function(a){if(!y(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();
a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;R||Y||K?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};g.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new J(b.target,b):new J(b,c)},isInView:function(b,c){var d,
f,e,k,h=a(b);if("undefined"===typeof c)f=q("Height"),k=q("Width"),d=aa(),e=ba();else{k=a(c);if(0===k.find(h).length)return;e=r(k);d=e.top+parseInt(k.css("border-top-width"));e=e.left+parseInt(k.css("border-left-width"));f=k.innerHeight();k=k.innerWidth()}f=d+f;k=e+k;var l=r(h),g=l.top,l=l.left,n=g+h.outerHeight(),h=l+h.outerWidth();return(d<=g&&g<f||d<n&&n<=f)&&(e<=l&&l<k||e<h&&h<=k)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,500))}var c=
3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,500)}})})();(function(){function e(){var b=a.mobile.activePage,b=b&&b[0]&&b[0].id;return y(b)&&0<b.length?b:null}function c(){var b=e();null!==b&&a(function(){q.addCSS(b);q.bindController(b)})}function n(a,b){for(var c in B)for(var d=B[c],e=a===c,k=0,h=d.length;k<h;k++){var l=d[k];if(e)l[(b?"enable":"disable")+"Listeners"]()}for(c in z)for(d=z[c],e=a===c,k=0,h=d.length;k<h;k++)if(l=d[k],e)l[(b?"enable":"disable")+"Listeners"]()}function m(a,
b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),d=b.split("."),e=c.length,k=0;k<e;k++){if(null==d[k])return 1;var h=parseInt(c[k],10),l=parseInt(d[k],10);if(h!==l)return h<l?-1:1}return null!=d[e]?-1:0}var v,q=null,r={},B={},z={},b={},h={},A=!1,k=!1,d=!1;g.u.obj.ns("h5.ui.jqm");g.ui.jqm.dataPrefix="h5";var l={__name:"JQMController",__ready:function(){var b=this,c=e();a(':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog")').each(function(){b.loadScript(this.id)});
var k=this.$find("#"+c);k.one("h5controllerready.emulatepageshow",function(){d&&k[0]===a.mobile.activePage[0]&&k.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog") pageinit':function(a){v||this._initPage(a.event.target.id)},':jqmData(role\x3d"page"), :jqmData(role\x3d"dialog") pagecreate':function(a){v&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(b){a(b.event.target).trigger("h5jqmpagehide",
{nextPage:a.mobile.activePage});k=!0;b=b.event.target.id;var c=B[b],d=z[b];if(c){for(var e=0,h=c.length;e<h;e++)c[e].dispose();B[b]=[]}if(d){e=0;for(h=d.length;e<h;e++)d[e].dispose();z[b]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);n(a,!0)},"{rootElement} pagehide":function(b){k||a(b.event.target).trigger("h5jqmpagehide",{nextPage:b.evArg.nextPage});k=!1;b=b.event.target.id;n(b,!1);this.removeCSS(b)},"{rootElement} pageshow":function(b){var c=!1,d=a(b.event.target),
e=b.evArg?b.evArg.prevPage:a("");if(b=B[d[0].id])for(var k=0,h=b.length;k<h;k++)if(!b[k].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})});c=!0;break}c||d.trigger("h5jqmpageshow",{prevPage:e})},"{rootElement} h5controllerbound":function(b){b=b.evArg;if(this!==b){var c=e();null!==c&&-1===a.inArray(b,B[c])&&(z[c]||(z[c]=[]),z[c].push(b))}},"{rootElement} h5controllerunbound":function(b){var c=
b.evArg;b=e();null!==b&&(c=a.inArray(c,z[b]),-1!==c&&z[b].splice(c,1))},loadScript:function(b){b=a("#"+b);var c=a.trim(b.data(this.getDataAttribute("script")));if(0!==c.length)return c=a.map(c.split(","),function(b){return a.trim(b)}),b=1==b.data(this.getDataAttribute("async")),g.u.loadScript(c,{async:b})},getDataAttribute:function(a){var b=g.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var c=r[a],d=b[a];if(c&&0!==c.length){B[a]||(B[a]=[]);for(var e=
B[a],k=0,h=c.length;k<h;k++){for(var l=c[k],n=!1,m=0,q=e.length;m<q;m++){var p=e[m];if(p&&p.__name===l.__name){n=!0;break}}n||B[a].push(g.core.controller("#"+a,l,d[k]))}}},addCSS:function(b){if(b=h[b])for(var c=document.getElementsByTagName("head")[0],d=c.getElementsByTagName("link"),e=d.length,k=0,l=b.length;k<l;k++){for(var g=a.mobile.path.parseUrl(b[k]).filename,n=!1,m=0;m<e;m++)if(a.mobile.path.parseUrl(d[m].href).filename===g){n=!0;break}n||(g=document.createElement("link"),g.type="text/css",
g.rel="stylesheet",g.href=b[k],c.appendChild(g))}},removeCSS:function(b){var c=h[b];if(c&&(b=e(),null!==b)){var d=h[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,c)&&-1===a.inArray(b,d)}).remove()}}};g.u.obj.expose("h5.ui.jqm.manager",{init:function(){A||(A=!0,v=0<=m(a.mobile.version,"1.4"),a(document).one("pageshow",function(){d=!0}),a(function(){q=fa.core.controllerInternal("body",l,null,{managed:!1});c()}))},define:function(d,k,l,g){y(d)||p(12E3,"id");null==k||
y(k)||F(k)||p(12E3,"cssSrc");null!=l&&((y(l)||F(l))&&p(12001),a.isPlainObject(l)&&"__name"in l||p(12E3,"controllerDefObject"),null==g||a.isPlainObject(g)||p(12E3,"initParam"));h[d]||(h[d]=[]);r[d]||(r[d]=[]);b[d]||(b[d]=[]);a.merge(h[d],a.map(a.makeArray(k),function(b,c){return-1!==a.inArray(b,h[d])?null:b}));l&&-1===a.inArray(l,r[d])&&(r[d].push(l),b[d].push(g));A&&null!==e()?c():this.init()}})})();(function(){function e(c,e,g){this._$arrowbox=a(c).css("display","none");this.setContent(e);a(g&&g.container||
g.target.parentElement||document.body).append(this._$arrowbox);this._$arrowbox.data("validation-balloon",this);g=g||{};g.cls&&this._$arrowbox.addClass(g.cls)}a.extend(e.prototype,{show:function(c){if(!this._isDisposed){var e=this._$arrowbox;this.hide();e.css("display","block");if(c){var g=c.direction||"top";e.addClass(g);var p=c.position,q=a(c.target);c=p?0:q.outerWidth();var r=p?0:q.outerHeight(),p=p?a.extend({},p):{top:q.offset().top,left:q.offset().left};"top"===g||"bottom"===g?(p.left+=(c-e.outerWidth())/
2,p.top="top"===g?p.top-(e.outerHeight()+34):p.top+(r+34)):(p.top+=(r-e.outerHeight())/2,p.left="left"===g?p.left-(e.outerWidth()+34):p.left+(c+34));e.css(p)}}},hide:function(){this._isDisposed||this._$arrowbox&&this._$arrowbox.css("display","none")},setContent:function(a){this._isDisposed||(this._$arrowbox.children().remove(),this._$arrowbox.append(a))},dispose:function(){this._isDisposed||(this.hide(),this._$arrowbox.remove(),this._$arrowbox=null,this._isDisposed=!0)}});g.core.expose({__name:"h5.ui.components.BalloonController",
__init:function(a){this.view.register("balloon",'\x3cdiv class\x3d"validation-balloon"\x3e\x3c/div\x3e')},create:function(a,g){var m=this.view.get("balloon");return new e(m,a,g)},getBalloonFromElement:function(c){return a(c).data("validation-balloon")}})})();(function(){var e={required:"{displayName}は必須項目です",min:function(a){return g.u.str.format("{displayName}は{violation[0].ruleValue.min}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以上の":"より大きい")},max:function(a){return g.u.str.format("{displayName}は{violation[0].ruleValue.max}{1}数値を入力してください。",
a,a.violation[0].ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{violation[0].ruleValue.regexp}を満たす文字列を入力してください。",digits:"{displayName}は整数部分{violation[0].ruleValue.integer}桁、小数部分{fraction}桁以下の数値を入力してください。",size:function(a){var e="",m="",p=a.violation[0].ruleValue.min,q=a.violation[0].ruleValue.max;null!=p&&(m=g.u.str.format("{0}以上",p));null!=q&&(e=g.u.str.format("{0}以下",q));return g.u.str.format("{displayName}は{1}{2}の長さでなければいけません。",a,m,e)},future:"{displayName}は現在時刻より未来の時刻を入力してください。",
past:"{displayName}は現在時刻より過去の時刻を入力してください。",assertNull:"{displayName}はnullでなければなりません。",assertNotNull:"{displayName}はnullでない値を設定してください。",assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません"};fa.validation={createValidateErrorMessage:function(c,n,m){var p=m&&m.message;m=a.extend({},n,{displayName:m&&m.displayName||c});if(y(p))return g.u.str.format(p,m);if(H(p))return p(m);var p=n.violation[0].ruleName,q=e[p];return q?H(q)?
q(m):g.u.str.format(q,m):g.u.str.format("{0}:{1}はルール{2}を満たしません",c,n.value,p)}};g.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,_wrapper:null,_setting:{},setContainer:function(a){this._container=a},setWrapper:function(a){this._wrapper=a},addMessageSetting:function(a){if(this._setting)for(var e in a)this._setting[e]=a[e];else this._setting=a},clearMessage:function(){this._container&&a(this._container).empty()},appendMessage:function(c){var e=a(this._container);if(e.length){var m=
this._wrapper;m?g.u.str.startsWith(a.trim(m),"\x3c")?(msgElement=a(m),msgElement.text(c)):msgElement=a(document.createElement(m)).html(c):msgElement=document.createTextNode(c);e.append(msgElement)}},getMessageByValidationResult:function(a,e){var g=a.invalidReason[e];return g?fa.validation.createValidateErrorMessage(e,g,this._setting[e]):null},appendMessageByValidationResult:function(c,e){var g=c.invalidProperties;e=y(e)?[e]:e;for(var p=0,q=g.length;p<q;p++){var r=g[p];e&&-1===a.inArray(r,e)||(r=this.getMessageByValidationResult(c,
r),this.appendMessage(r))}null===c.isAllValid&&c.addEventListener("validate",this.own(function(c){if(!c.isValid&&!e||-1!==a.inArray(c.name,e))c=fa.validation.createValidateErrorMessage(c.name,c.target.invalidReason[c.name],this._setting[c.name]),this.appendMessage(c)}))}})})();(function(){g.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_setSetting:function(a){this._setting=a},_onValidate:function(a){for(var c=a.properties,g=0,m=c.length;g<m;g++){var p=c[g];this._setStyle(this.parentController._getElementByName(p),
p,a)}},_onFocus:function(a,c,g){this._setStyle(a,c,g)},_onKeyup:function(a,c,g){this._setStyle(a,c,g)},reset:function(){for(var e in this._styleAppliedElements){var c=this._styleAppliedElements[e],g=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);this._setValidateState(null,c,g,e)}},_setStyle:function(e,c,g){var m=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);if(!m.off){var p=m.replaceElement;if(e=H(p)?p(e):p||e)-1!==a.inArray(c,g.validatingProperties)?
(this._setValidateState("validating",e,m),g.addEventListener("validate",this.own(function(a){a.name===c&&this._setValidateState(a.isValid?"success":"error",e,m,c)}))):this._setValidateState(-1===a.inArray(c,g.invalidProperties)?"success":"error",e,m,c)}},_setValidateState:function(e,c,g,m){var p=g.errorClassName,q=g.successClassName,r=g.validatingClassName;a(c).removeClass(p).removeClass(q).removeClass(r);e&&(e=g[e+"ClassName"],a(c).addClass(e),this._styleAppliedElements[m]=c)}})})();(function(){g.core.expose({__name:"h5.ui.validation.Composition",
_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._messageOutputController.clearMessage();this._messageOutputController.appendMessageByValidationResult(a)},reset:function(){this._messageOutputController.clearMessage()},_setChildSetting:function(){var a=this._setting;this._messageOutputController.setContainer(a.container);
this._messageOutputController.setWrapper(a.wrapper);var c=a.property,g={},m;for(m in c)g[m]={displayName:c[m].displayName||a.displayName,message:c[m].message||a.message,formatter:c[m].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){g.core.expose({__name:"h5.ui.validation.ErrorBalloon",_executedOnValidate:!1,_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_balloonTargets:[],_setSetting:function(a){this._setting=a;this.isInit?
this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._executedOnValidate=!0},_onFocus:function(a,c,g){this._setErrorBalloon(a,c,g,"focus")},_onBlur:function(a,c,g){this._setErrorBalloon(a,c,g,"blur")},_onKeyup:function(a,c,g){this._setErrorBalloon(a,c,g,"keyup")},reset:function(){a(this._balloonTargets).each(this.own(function(a){this._hideBalloon(a)}));this._executedOnValidate=!1},_setErrorBalloon:function(e,c,g,m){if(this._executedOnValidate){var p=
a.extend({},this._setting,this._setting.property&&this._setting.property[c]);if(!p.off){var q=p.replaceElement,r=H(q)?q(e):q||e;if(r)if("blur"===m||e!==document.activeElement&&!a(document.activeElement).closest(e).length)this._hideBalloon(e);else{var B=p.placement||"top",z=p.container||null;-1!==a.inArray(c,g.validatingProperties)?g.addEventListener("validate",this.own(function(a){e===document.activeElement&&(a.isValid?this._hideBalloon(e):this._showBalloon(r,B,z,this._messageOutputController.getMessageByValidationResult(g,
a.name)))})):g.invalidReason&&g.invalidReason[c]?this._showBalloon(r,B,z,this._messageOutputController.getMessageByValidationResult(g,c)):this._hideBalloon(e)}}}},_showBalloon:function(a,c,n,m){this._hideBalloon(a);if(this._balloonController){var p=this._balloonController.create(m,{target:a,container:n});p.show({target:a,direction:c});this._currentBalloon=p;this._addBalloonTarget(a)}else{var q=g.core.controller(this.rootElement,g.ui.components.BalloonController);this.manageChild(q);q.readyPromise.done(this.own(function(){this._balloonController=
q;this._showBalloon(a,c,n,m)}))}},_hideBalloon:function(a,c,g,m){this._currentBalloon&&(this._currentBalloon.dispose(),this._currentBalloon=null);this._removeBalloonTarget(a)},_setChildSetting:function(){var a=this._setting,c=a.property,g={},m;for(m in c)g[m]={displayName:c[m].displayName||a.displayName,message:c[m].message||a.message,formatter:c[m].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)},_addBalloonTarget:function(e){-1<a.inArray(e,this._balloonTargets)||this._balloonTargets.push(e)},
_removeBalloonTarget:function(e){e=a.inArray(e,this._balloonTargets);-1!==e&&this._balloonTargets.splice(e,1)}})})();(function(){var e={__name:"h5.ui.validation.BootstrapErrorBalloon",_hideBalloon:function(c){a(c).tooltip("hide");this._removeBalloonTarget(c)},_showBalloon:function(c,e,g,p){a(c).removeAttr("title").attr({"data-placement":e,"data-container":g,"data-original-title":p,"data-animation":!1}).tooltip({trigger:"manual"}).tooltip("show");this._addBalloonTarget(c)}},e=a.extend({},g.ui.validation.ErrorBalloon,
e);g.core.expose(e)})();(function(){g.core.expose({__name:"h5.ui.validation.Message",_executedOnValidate:!1,_messageElementMap:{},_messageOutputController:g.ui.validation.MessageOutputController,_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._executedOnValidate=!0;for(var c=a.validProperties,g=0,m=c.length;g<m;g++){var p=c[g];this._setMessage(this.parentController._getElementByName(p),
p,a)}},_onFocus:function(a,c,g){this._setMessage(a,c,g,"focus")},_onBlur:function(a,c,g){this._setMessage(a,c,g,"blur")},reset:function(){for(var a in this._messageElementMap){var c=this._messageElementMap[name];c&&c.remove()}this._executedOnValidate=!1},_setMessage:function(e,c,g,m){if(this._executedOnValidate){var p=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);if(!p.off)if("blur"===m)this._removeMessage(c);else if(-1!==a.inArray(c,g.validatingProperties))this._removeMessage(c),
g.addEventListener("validate",this.own(function(a){a.name!==c||a.isValid||"focus"===m&&document.activeElement!==e||this._setMessage(e,c,g,m)}));else{this._removeMessage(c);var q=p.appendMessage,p=p.replaceElement,p=H(p)?p(e):p||e,r=this._messageElementMap[c];r||(r=a('\x3cspan class\x3d"message"\x3e'),this._messageElementMap[c]=r);r.html(this._messageOutputController.getMessageByValidationResult(g,c));q?q(r[0],p,c):p&&a(p).after(r)}}},_removeMessage:function(a){this._messageElementMap[a]&&this._messageElementMap[a].remove()},
_setChildSetting:function(){var a=this._setting,c=a.property,g={},m;for(m in c)g[m]={displayName:c[m].displayName||a.displayName,message:c[m].message||a.message,formatter:c[m].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){g.core.expose({__name:"h5.ui.validation.AsyncIndicator",_indicators:{},_setSetting:function(a){this._setting=a},_onValidate:function(e){for(var c=e.validatingProperties,g=e.properties,m=0,p=g.length;m<p;m++){var q=g[m];if(-1!==a.inArray(q,
c)){var r=this.parentController._getElementByName(q);this._showIndicator(r,q,e)}else this._hideIndicator(q)}},_onFocus:function(e,c,g){-1!==a.inArray(c,g.validatingProperties)?(e=this.parentController._getElementByName(c),this._showIndicator(e,c,g)):this._hideIndicator(c)},_onKeyup:function(e,c,g){-1!==a.inArray(c,g.validatingProperties)&&this._showIndicator(e,c,g)},reset:function(){for(var a in this._indicators)this._hideIndicator(a);this._executedOnValidate=!1},_showIndicator:function(e,c,n){var m=
a.extend({},this._setting,this._setting.property&&this._setting.property[c]);!m.off&&(m=m.replaceElement,e=H(m)?m(e):m||e)&&(this._indicators[c]=this._indicators[c]||g.ui.indicator({target:e,block:!1}),this._indicators[c].show(),n.addEventListener("validate",this.own(function(a){c===a.name&&this._hideIndicator(a.name)})),n.addEventListener("abort",this.own(function(a){this._hideIndicator(c)})))},_hideIndicator:function(a){this._indicators[a]&&this._indicators[a].hide()}})})();(function(){var e={style:g.ui.validation.Style,
composition:g.ui.validation.Composition,balloon:g.ui.validation.ErrorBalloon,bsBalloon:g.ui.validation.BootstrapErrorBalloon,message:g.ui.validation.Message,asyncIndicator:g.ui.validation.AsyncIndicator},c=function(b){if(null!=a(b).data("required"))return!0},n=function(b){if(null!=a(b).data("assertFalse"))return!0},m=function(b){if(null!=a(b).data("assertTrue"))return!0},p=function(b){if(null!=a(b).data("nul"))return!0},q=function(b){if(null!=a(b).data("notNull"))return!0},r=function(b){b=a(b).data("max");
if(null!=b)return"number"===typeof b?b:F(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},y=function(b){b=a(b).data("min");if(null!=b)return"number"===typeof b?b:F(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},z=function(b){b=a(b).data("future");if(null!=b)return new Date(b)},b=function(b){b=a(b).data("past");if(null!=b)return new Date(b)},h=function(b){b=a(b).data("pattern");if(null!=b)return new RegExp(b)},A=function(b){b=a(b).data("size");if(null!=b){if(F(b)){for(var c=0,
e=b.length;c<e;c++)b[c]=parseInt(b[c]);return b}return parseInt(b)}};g.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],_validationLogic:g.validation.FormValidationLogic,_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=a;a=this._plugins;for(var b in a){var c=a[b];c._setSetting&&c._setSetting(this._margePluginSettings(b))}},_margePluginSettings:function(b){this._pluginSetting;
var c=this._setting,e=c.output,c=c.property,e=a.extend({},e&&e[b]);e.property={};for(var f in c){var h=a.extend({},c[f]);a.extend(h,h[b]);var n=g.u.obj.getByPath("output."+b,h);delete h.output;e.property[f]=a.extend({},h,n)}return e},__construct:function(){this._addRuleCreator("required",c);this._addRuleCreator("assertFalse",n);this._addRuleCreator("assertTrue",m);this._addRuleCreator("nul",p);this._addRuleCreator("notNull",q);this._addRuleCreator("max",r);this._addRuleCreator("min",y);this._addRuleCreator("future",
z);this._addRuleCreator("past",b);this._addRuleCreator("pattern",h);this._addRuleCreator("size",A)},__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&(this._bindedForm=this.rootElement,a(this._bindedForm).prop("novalidate",!0));var b={};a(this._getElements()).each(this.ownWithOrg(function(a){var c=a.getAttribute("name");if(null!=c){var f={};b[c]=f;for(var c=0,e=this._ruleCreators.length;c<e;c++){var g=this._ruleCreators[c].key,h=this._ruleCreators[c].func,h=h(a);void 0!==h&&(f[g]=
h)}}}));this.addRule(b);if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},addOutput:function(b){if(this.isInit){b=a.isArray(b)?b:[b];for(var c=0,g=b.length;c<g;c++){var f=b[c],h=e[f];h?this._addOutputPlugin(f,h):this.log.warn('プラグイン"{0}"は存在しません',f)}}else this.initPromise.done(this.own(function(){this.addOutput(b)}))},addRule:function(a){this._validationLogic.addRule(a)},removeRule:function(a){this._validationLogic.removeRule(a);this.validate(a)},enableRule:function(a){this._validationLogic.enableRule(a)},
disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(b){b=b&&(F(b)?b:[b]);var c=a(this._getElements()),e=a(this._getInputGroupElements()),f=this._setting&&this._setting.property||{},g={},h=[],n=this.rootElement;c.each(function(){var c=this.name;h.push(c);var d=g;if(e.find(this).length)var m=a(this).closest("[data-h5-input-group-container]").data("h5-input-group-container");if(m){h.push(m);if(b&&-1===a.inArray(c,b)&&-1===a.inArray(m,b))return;g[m]=g[m]||{};d=g[m]}else if(b&&
-1===a.inArray(c,b))return;if("file"===this.type){var m=this.files,p=m.length;if(p){d[c]=d[c]||[];for(var q=0;q<p;q++)d[c].push(m[q])}}else c&&("radio"!==this.type&&"checkbox"!==this.type||!1!==this.checked)&&(p=(m=f[c]&&f[c].valueFunc)?m(n,c):a(this).val(),m&&void 0===p||null==p||(f[c]&&f[c].isArray&&(p=O(p)),void 0!==d[c]?(a.isArray(d[c])||(d[c]=[d[c]]),a.isArray(p)?Array.prototype.push.apply(d[c],p):d[c].push(p)):d[c]=p))});for(var m in f)b&&-1===a.inArray(m,b)||-1!==a.inArray(m,h)||(c=(c=f[m]&&
f[m].valueFunc)&&c(n,m),void 0!==c&&(g[m]=c));return g},setValue:function(b){var c=a(this._getElements()),e={},f={},g;for(g in b)if(a.isPlainObject(b[g]))for(var h in b[g])f[h]=b[g][h];else f[g]=b[g];b=f;c.each(function(){var c=this.name;if(c){var d=b[c];if("radio"===this.type||"checkbox"===this.type)a.isArray(d)&&(e[c]=e[c]?e[c]+1:0,d=d[e[c]]),a(this).prop("checked",d);else if(a(this).is("select[multiple]")){if(a(this).val([]),a.isArray(d)&&(e[c]=e[c]||0,d=d.slice(e[c])),null!=d)for(var f=[],g=0,
h=d.length;g<h;g++){f.push(d[g]);a(this).val(f);e[c]++;var m=a(this).val(),m=a.isArray(m)?m:[m];if(m.length<f.length){e[c]--;break}}}else a.isArray(d)&&(e[c]=e[c]||0,d=d[e[c]++]),a(this).val(d)}})},clearValue:function(){a(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?a(this).prop("checked",!1):a(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._waitingValidationResultMap={};var a=this._plugins,b;
for(b in a)this._resetPlugin(b,a[b])},validate:function(a){a=this._validate(a);this._callPluginValidateEvent("_onValidate",a);return a},getOutput:function(a){return this._plugins[a]},"{rootElement} focusin":function(a){this._pluginElementEventHandler(a,"_onFocus")},"{rootElement} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{rootElement} keyup":function(a){this._pluginElementEventHandler(a,"_onKeyup")},"{rootElement} change":function(a){this._pluginElementEventHandler(a,"_onChange")},
"{rootElement} click":function(a){this._pluginElementEventHandler(a,"_onClick")},_getElementByName:function(b){var c=this._setting.property&&this._setting.property[b]&&this._setting.property[b].srcElement;return c||(c=a(this._getElements()).filter('[name\x3d"'+b+'"]')[0])?c:(b=a(this._getInputGroupElements()).filter('[data-h5-input-group-container\x3d"'+b+'"]')[0])?b:null},_getElements:function(){var b=this.$find("input,select,textarea").not('[type\x3d"submit"],[type\x3d"reset"],[type\x3d"image"]');
if(!this._bindedForm)return b;var c=a(this._bindedForm).attr("id");return a("input,select,textarea").not('[type\x3d"submit"],[type\x3d"reset"],[type\x3d"image"]').filter(function(){var e=a(this),f=e.attr("form");return f&&f===c||!f&&-1!==b.index(e)}).toArray()},_getInputGroupElements:function(){var b=a("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=a(this),e=c.attr("form");return e&&e===formId||!e&&-1!==b.index(c)}).toArray()},_addRuleCreator:function(a,
b){this._ruleCreators.push({key:a,func:b})},_resetPlugin:function(a,b){b.reset&&b.reset.call(b)},_addOutputPlugin:function(a,b){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var c=g.core.controller(this._bindedForm||this.rootElement,b);c._setSetting&&c._setSetting(this._margePluginSettings(a));this.manageChild(c);this._plugins[a]=c}},_validate:function(a){var b=this.getValue(a),c=this._validationLogic.validate(b,a);this.log.debug("-----------------------------------------");this.log.debug("・validateするデータ");
this.log.debug(b);this.log.debug("・validate対象のプロパティ:"+a);this.log.debug("・validate結果");this.log.debug(c);this.log.debug(c.isAsync?"非同期":"同期");this.log.debug("-----------------------------------------");if(c.isAsync){a=c.validatingProperties;for(var b=0,f=a.length;b<f;b++)this._waitingValidationResultMap[a[b]]=c;c.addEventListener("validate",this.own(function(a){delete this._waitingValidationResultMap[a.name]}))}return c},_createPluginElementEventArgs:function(a,b){},_pluginElementEventHandler:function(b,
c){var e=b.event.target;if(this._isFormControls(e)){var f=e.name;if(f){var g;a(this._getInputGroupElements()).find(e).length&&(g=a(e).closest("[data-h5-input-group-container]").data("h5-input-group-container"));var h=this._validate(g||f);this._callPluginElementEvent(c,e,f,h);g&&(e=this._getElementByName(g),this._callPluginElementEvent(c,e,g,h))}}},_callPluginValidateEvent:function(a,b){var c=this._plugins,f;for(f in c){var e=c[f];e[a]&&e[a].call(e,b)}},_callPluginElementEvent:function(a,b,c,f){var e=
this._plugins,g;for(g in e){var h=e[g];if(h[a])h[a](b,c,f)}},_submitHandler:function(a,b){a.event.preventDefault();var c=this.validate();c.isAsync?c.addEventListener("validateComplete",function(){this.isAllValid&&b[0].submit()}):c.isAllValid&&b[0].submit()},_isFormControls:function(b){return-1!==a(this._getElements()).index(b)}})})();(function(){function e(){m||(m=navigator.geolocation);return m}function c(a,b){this.oblateness=a;this.semiMajorAxis=b}function n(){}var m=null,v=g.env.ua;c.prototype.getOblateness=
function(){return this.oblateness};c.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var q=new c(298.257222,6378137),r=new c(299.152813,6377397.155),y=Math.PI/180;a.extend(n.prototype,{isSupported:v.isIE&&9<=v.browserVersion?!0:!!e(),getCurrentPosition:function(a){var b=g.async.deferred();e().getCurrentPosition(function(a){b.resolve(a)},function(a){b.reject(ia(2002,null,a))},a);return b.promise()},watchPosition:function(a){function b(){}var c=g.async.deferred(),m=e().watchPosition(function(a){c.notify(a)},
function(a){e().clearWatch(m);c.reject(ia(2002,null,a))},a);b.prototype.unwatch=function(){e().clearWatch(m);c.resolve()};return c.promise(new b)},getDistance:function(a,b,e,g,k){isFinite(a)&&isFinite(b)&&isFinite(e)&&isFinite(g)||p(2E3);var d=k?k:q;d instanceof c||p(2001);k=d.getSemiMajorAxis();d=d.getOblateness();a*=y;e*=y;var l=(a+e)/2,d=Math.pow(Math.sqrt(2*d-1)/d,2),f=Math.sqrt(1-d*Math.pow(Math.sin(l),2));return Math.sqrt(Math.pow(k*(1-d)/Math.pow(f,3)*(a-e),2)+Math.pow(k/f*Math.cos(l)*(b*y-
g*y),2))},GS_GRS80:q,GS_BESSEL:r});g.u.obj.expose("h5.api",{geo:new n})})();(function(){function e(a){if(a){var b=a.deferred;(wa(b)||Ba(b)||!a.result)&&p(3E3)}}function c(b,c,f){if(a.isPlainObject(b))for(var e in b){var g=a.trim(e).replace(/ +/g," ").split(" "),h=[];""===g[0]?p(3011):1===g.length?(h.push(g[0]),h.push("\x3d"),h.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(g[1])?3===g.length&&/^like$/i.test(g[1])?(h.push(g[0]),h.push(g[1]),h.push("?"),h.push("ESCAPE"),h.push('"'+g[2]+'"')):(h.push(g[0]),
h.push(g[1]),h.push("?")):p(3003);c.push(h.join(" "));f.push(b[e])}}function n(){}function m(){this._multiple=!1}function v(a){this._db=a;this._df=A();this._tx=null;this._tasks=[];this._queue=[]}function q(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._columns=F(c)?c.join(", "):"*";this._orderBy=this._where=null}function r(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?O(c):[];this._df=A();this._multiple=!0}
function B(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function z(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function b(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function h(a){this._db=a}var A=g.async.deferred,k=g.u.str.format;a.extend(m.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});
a.extend(v.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof m||p(3009);var b=this._getRecentTask();b&&!b.result||this._queue.push(a);return this},_execute:function(a){function b(){if(0===h.length){var e=a(k);c._setResult.apply(c,[e]);g.notify(e,c)}else{for(var m=h.shift(),
n=m._statements,p=m._parameters,q=A().resolve().promise(),e=[],r=0,v=n.length;r<v;r++)(function(a,b){q=pa(q,function(){var d=A();c._tx.executeSql(a,b,function(a,b){e.push(m._onComplete(b));d.resolve()});return d.promise()})})(n[r],p[r]);pa(q,function(){k.push(m._multiple?e:e[0]);b()})}}var c=this,g=this._df,h=this._queue,k=[];try{e(this._getRecentTask());this._addTask(g);for(var m=0,n=h.length;m<n;m++)h[m]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){c._tx=
a;b()},function(a){c._tx=null;for(var b=c._tasks,d=b.length-1;0<=d;d--)b[d].deferred.reject(ia(3010,["SQLDB ERROR(code\x3d"+a.code+")",a.message],a))},function(){c._tx=null;for(var a=c._tasks,b=a.length-1;0<=b;b--){var d=a[b];d.deferred.resolve(d.result)}})}catch(p){g.reject(p)}this._df=A();return g.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});q.prototype=new m;a.extend(q.prototype,{where:function(b){a.isPlainObject(b)||
y(b)||p(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){a.isPlainObject(b)||y(b)||p(3004,["Select","orderBy"]);this._orderBy=O(b);return this},_buildStatementAndParameters:function(){var b,e=this._where;b=k("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(e)){var f=[];c(e,f,this._parameters);b+=" WHERE "+f.join(" AND ")}else y(e)&&(b+=" WHERE "+e);F(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=
[this._parameters]},_onComplete:function(a){return a.rows}});r.prototype=new m;a.extend(r.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,e=this._parameters;if(0===b.length)c.push(k("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else for(var g=0,h=b.length;g<h;g++){var m=b[g];if(null==m)c.push(k("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else if(a.isPlainObject(m)){var n=[],p=[],q=[],r;for(r in m)n.push("?"),p.push(r),q.push(m[r]);
c.push(k("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,p.join(", "),n.join(", ")));e.push(q)}}},_onComplete:function(a){return a.insertId}});B.prototype=new m;a.extend(B.prototype,{where:function(b){a.isPlainObject(b)||y(b)||p(3004,["Update","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b,e=this._where;b=this._values;var f=[],g;for(g in b)f.push(g+" \x3d ?"),this._parameters.push(b[g]);b=k("UPDATE {0} SET {1}",this._tableName,f.join(", "));a.isPlainObject(e)?
(f=[],c(e,f,this._parameters),b+=" WHERE "+f.join(" AND ")):y(e)&&(b+=" WHERE "+e);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});z.prototype=new m;a.extend(z.prototype,{where:function(b){a.isPlainObject(b)||y(b)||p(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b,e=this._where;b=k("DELETE FROM {0}",this._tableName);if(a.isPlainObject(e)){var f=[];c(e,f,this._parameters);b+=" WHERE "+f.join(" AND ")}else y(e)&&
(b+=" WHERE "+e);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});b.prototype=new m;a.extend(b.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});a.extend(h.prototype,{select:function(a,b,c){y(a)||p(3001,"select");F(b)||"*"===b||p(3005,"select");return new q(this.transaction(c),a,b)},insert:function(b,c,e){y(b)||p(3001,"insert");null==c||F(c)||a.isPlainObject(c)||p(3006,"insert");return new r(this.transaction(e),
b,c)},update:function(b,c,e){y(b)||p(3001,"update");a.isPlainObject(c)||p(3006,"update");return new B(this.transaction(e),b,c)},del:function(a,b){y(a)||p(3001,"del");return new z(this.transaction(b),a)},sql:function(a,c,e){y(a)||p(3007,"sql");null==c||F(c)||p(3008,"sql");return new b(this.transaction(e),a,c)},transaction:function(a){void 0==a||a instanceof v||p(3002,"transaction");return a?a:new v(this._db)}});a.extend(n.prototype,{isSupported:!!window.openDatabase,open:function(a,b,c,e){if(this.isSupported)return a=
openDatabase(a,b,c,e),new h(a)}});g.u.obj.expose("h5.api",{sqldb:new n})})();(function(){function e(a){this._storage=a}a.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},getItem:function(a){a=this._storage.getItem(a);return null===a?null:g.u.obj.deserialize(a)},setItem:function(a,e){this._storage.setItem(a,g.u.obj.serialize(e))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var e=
this._storage,g=0,p=e.length;g<p;g++){var q=e.key(g);a(g,q,this.getItem(q))}}});g.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new e(window.localStorage),session:new e(window.sessionStorage)})})();(function(){function e(a){a=g.core.controllerManager.getControllers(a,{deep:!0});for(var b=0,c=a.length;b<c;b++)aa(a[b])||
a[b].dispose()}function c(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function n(b){b=a(b).closest("[data-h5-default-scene],[data-h5-scene]");return b.length?b.get(0):null}function m(b){b=a(b).closest("[data-h5-main-scene-container],[data-h5-scene-container]");return b.length?b.get(0):null}function v(a,b){if(a===b)return!0;var c=m(a),d=b?m(b):null;return c!==d?!1:n(a)===b}function q(d,e,f){var h=
d?d:document.body;d=a(h);if(0!==d.length){1!==d.length&&p(1E5);if(!ua){var k=c(h,"[data-h5-main-scene-container]");0===k.length&&(k=c(h,"main"),0===k.length&&h===document.body&&(k=a(h)),0<k.length&&k.eq(0).attr("data-h5-main-scene-container","data-h5-main-scene-container"))}if(d.is("[data-h5-scene-container]"))K(h);else if(d.is("[data-h5-main-scene-container]"))K(h,!0);else{var l=a(h).is("[data-h5-default-scene],[data-h5-scene]")&&!r(h),m=l?g.async.deferred():null,q=a(h).is("[data-h5-default-scene],[data-h5-scene]")?
h:n(h),t=!1;c(h,"[data-h5-controller]").each(function(){for(var c=this.getAttribute("data-h5-controller").split(","),d=0,g=c.length;d<g;d++){var k=a.trim(c[d]);if(""===k||e&&k!==e)return!0;if(!r(this,k)){if(!v(this,q))return!0;var w=!1;l&&!t&&this===h&&(w=t=!0);B(this,k);k=b(k,this,w?f:null);w&&k.done(function(a){m.resolve(a)})}}});d.find("[data-h5-main-scene-container],[data-h5-scene-container]").each(function(){if(v(this,q))return!0;var b=a(this);b.is("[data-h5-main-scene-container]")?K(this,!0):
b.is("[data-h5-scene-container]")&&K(this)});if(l)return m.promise()}}}function r(b,c){var d=a(b).attr("data-h5-dyn-controller-bound");if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function B(b,c){var d=a(b).attr("data-h5-dyn-controller-bound")||"";d&&(d+=",");d+=c;a(b).attr("data-h5-dyn-controller-bound",d)}function z(b,c,d){var e=b?b:document.body,f=g.async.deferred();b=!1;var h=null,k=a(e).find("\x3e[data-h5-default-scene]");
0<k.length&&(h=k.eq(0),r(h)||(b=!0,h.is("[data-h5-controller]")||(B(h,ta.__name),h=g.core.controller(h,ta,d),f.resolve(h))));b||(e=a(e).children().eq(0).filter("[data-h5-scene]"),0<e.length&&!r(e)&&(b=!0,e.attr("data-h5-default-scene","data-h5-default-scene"),k=e,e.is("[data-h5-controller]")||(B(e,ta.__name),h=g.core.controller(e,ta,d),f.resolve(h))));b||p(100001);c=q(k.get(0),c,d);Ba(f)||c.done(function(a){f.resolve(a)});return f.promise()}function b(a,b,c){var d=g.async.deferred();g.res.get(a).then(function(a){a=
g.core.controller(b,a,c);d.resolve(a)});return d.promise()}function h(a,b){this.type=a;this.data=b}function A(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function k(a,b){var c=pa[a];c||(c=new A(a,b),pa[a]=c);return c}function d(){this._recvChannel=new A("__h5__RMI",window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new A("__h5__RMI_Result",
window.opener)}function l(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=g.core.data.createSequence(1,1,g.core.data.SEQ_INT);this._sendChannel=k("__h5__RMI",a);this._recvChannel=k("__h5__RMI_Result",a);this._recvChannel.subscribe(this._receive,this)}function f(a){a=a||{};var b;if(f._instance)b=f._instance;else{b=f._instance=this;var c=!!window.history.pushState;b.urlHistoryMode=a.urlHistoryMode||S.HISTORY;switch(b.urlHistoryMode){case S.HASH:b.urlHistoryActualMode=
N.HASH;break;case S.NONE:b.urlHistoryActualMode=N.NONE;break;case S.FULLRELOAD:b.urlHistoryActualMode=N.FULLRELOAD;break;case S.HISTORY:case S.HISTORY_OR_HASH:case S.HISTORY_OR_ERROR:case S.HISTORY_OR_NONE:case S.HISTORY_OR_FULLRELOAD:c&&(b.urlHistoryActualMode=N.HISTORY)}if(!b.urlHistoryActualMode&&!c)switch(b.urlHistoryMode){case S.HISTORY_OR_ERROR:p(100011);return;case S.HISTORY:case S.HISTORY_OR_HASH:b.urlHistoryActualMode=N.HASH;break;case S.HISTORY_OR_NONE:b.urlHistoryActualMode=N.NONE;break;
case S.HISTORY_OR_FULLRELOAD:b.urlHistoryActualMode=N.FULLRELOAD}b.urlHistoryActualMode||p(100012,b.urlHistoryMode);a.baseUrl&&(c=new D(a.baseUrl),b._baseUrl=c.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));b._urlMaxLength=a.urlMaxLength||URL_MAX_LENGTH;var d=b._onChange;b._onChange=function(){return d.apply(b,arguments)}}a.routes&&(b._routes=b._routes.concat(a.routes));return b}function D(a){null!=a&&(a=a.match(D.regExp),this.href=a[0]||"",this.protocol=a[1]||"",this.host=a[2]||"",this.hostname=a[3]||
"",this.port=a[4]||"",this.pathname=a[5]||"",this.dir=a[6]||"",this.file=a[7]||"",this.search=a[8]||"",this.hash=a[9]||"")}function F(a){this.__controller=a}function Q(){}function W(b){b=a(b);if(!1===b.children().eq(0).is("[data-h5-default-scene],[data-h5-scene]")){b.wrapInner(a("\x3cdiv data-h5-default-scene\x3e\x3c/div\x3e"));var c=b.attr("data-h5-controller");c&&b.removeAttr("data-h5-controller").children().attr("data-h5-controller",c)}}function V(b,d,e){var f=g.async.deferred();g.ajax({url:b,
dataType:"html",method:d||"get",data:e}).done(function(b){var d=b.replace(ra,"").match(ma);b=d?"\x3cdiv data-h5-dyn-dummy-body "+d[1]+"\x3e"+d[2]+"\x3c/div\x3e":b;wa.test(b)&&(b="\x3cdiv data-h5-scene-container\x3e"+b+"\x3c/div\x3e");b=a(b);d=c(b,"[data-h5-main-scene-container]");0===d.length&&(d=c(b,"main"));0<d.length&&(b=d.eq(0),b.attr("data-h5-main-scene-container","data-h5-main-scene-container"));if(1<b.length||!a(b).is("[data-h5-main-scene-container],[data-h5-scene-container]")&&!b.is("[data-h5-dyn-dummy-body]"))b=
a("\x3cdiv data-h5-scene-container\x3e\x3c/div\x3e").append(b);W(b);f.resolve(b.children())}).fail(function(a){f.reject(a)});return f}function J(b,c,d){y(b)?c=V(b,c,d):(c=g.async.deferred(),b=null==b?a('\x3cdiv class\x3d"h5-scene"\x3e\x3c/div\x3e').get(0):g.u.obj.isJQueryObject(b)?b[0]:b,c.resolve(b));return c.promise()}function M(){}function X(b,c){var d="";a.each(b,function(a,b){d&&(d+="\x26");if(c||"args"!==a&&"serverArgs"!==a)if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var f=
"",h=0;h<b.length;h++)f&&(f+="\x26"),f+=e+"[]",f+="\x3d",f+=encodeURIComponent(b[h]);d+=f}else d+=e,d+="\x3d",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(ea+a):d+encodeURIComponent(ia+a),d+="\x3d",d+=encodeURIComponent(g.u.obj.serialize(b).substring(2));else d+=X(b,a)});return d}function u(b){u._checkKeyRegExp||(u._checkKeyRegExp=new RegExp("^("+G+"|"+ka+")?(.+)"),u._checkArrayRegExp=/^(.*)\[\]$/);var c={},d=u._checkKeyRegExp,e=u._checkArrayRegExp;a.each(b.split("\x26"),function(a,
b){b=b.split("\x3d");var f=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),k=f.match(d);if(k){f=k[1]||"";k=k[2];if(!f){c.serverArgs=c.serverArgs||{};var l=k.match(e);l?(l=l[1],!1===l in c.serverArgs&&(c.serverArgs[l]=[]),c.serverArgs[l]instanceof Array&&c.serverArgs[l].push(h)):c.serverArgs[k]=h}f===ea?(c.args=c.args||{},c.args[k]=g.u.obj.deserialize("2|"+h)):f===ia&&(c[k]=g.u.obj.deserialize("2|"+h))}});return c}function C(a){if(!a)return"";C._regExp||(C._regExp=new RegExp("(^|\x26)(?:"+G+"|"+
ka+")[^\x3d]*\x3d.*?(?\x3d\x26|$)","g"));var b=C._regExp,c=new D(a);a=c.pathname;c=c.search||"";(c=c.substring(1).replace(b,""))&&(c="?"+c);return a+c}function la(a){var b=new D(a);a=b.pathname||"";b=u((b.search||"").substring(1));b.to||(b.to=a);return b}function da(b){b=a.extend(!0,{},b);var c=b.to,d="",e="";L.test(c)||(delete b.to,c=C(c),e=new D(c),d=e.pathname,e=e.search);(b=X(b))&&(e=e+(e?"\x26":"?")+b);return d+e}function K(b,c){null==b&&(b=a("\x3cdiv\x3e\x3c/div\x3e").get(0));a(b).is("[data-h5-dyn-container-bound]")&&
p(100007);var d=c;c?a(b).is(":not([data-h5-main-scene-container])")&&a(b).attr("data-h5-main-scene-container","data-h5-main-scene-container"):(a(b).is(":not([data-h5-scene-container])")&&a(b).attr("data-h5-scene-container","data-h5-scene-container"),d=g.settings.scene.followTitle);d=fa.core.controllerInternal(b,va,{isMain:c,followTitle:d},{async:!1});a(b).attr("data-h5-dyn-container-bound","data-h5-dyn-container-bound");return d}function Y(){ba||(ba=!0,q())}function R(a,b){return g.core.controllerManager.getControllers(a||
document.body,{name:va.__name,deep:b&&!1===b.deep?!1:!0})}var U={NORMAL:"normal",ONCE:"once",SILENT:"silent"},T={GET:"get",POST:"post"},S={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",HISTORY_OR_FULLRELOAD:"historyOrFullreload"},N={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload"},aa=fa.core.isDisposing,ba=!1,ea=g.settings.scene.clientQueryStringPrefix,ia=g.settings.scene.clientFWQueryStringPrefix,
G=null,ka=null,E=g.settings.scene.urlHistoryMode,t=null,L=/Controller$/,I=null,ca=null,oa=null,qa=null,ta={__name:"h5.scene.DummyController"};g.mixin.eventDispatcher.mix(A.prototype);a.extend(A.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new h(this.type,a),a=g.u.obj.serialize(a),this._targetWindow.postMessage(a,location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},
_receiveMessage:function(a){var b;try{if(b=g.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}a=this._subscribers;for(var d=0,e=a.length;d<e;d++){var f=a[d];f.func.call(f.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var pa={};a.extend(d.prototype,{_receive:function(a){var b;b=g.core.controllerManager.getControllers(document.body)[0];var c=a.id,d=a.method;a=a.args;!b[d]||H(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},
_callFunction:function(a,b,c,d){d=O(d);var e=void 0;try{e=b[c].apply(b,d)}catch(f){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;g.async.isPromise(e)?e.done(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});a.extend(l.prototype,{invoke:function(a,
b){var c=g.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});a.extend(f.prototype,{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,
_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(y(f.test)){if(c===f.test){d=f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===
typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(b){b=b||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,b&&b.silent||this._onChange(),this.urlHistoryActualMode){case N.HASH:a(window).on("hashchange",this._onChange);break;case N.HISTORY:a(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};if(this._started){this._checkUrlLength(a,{throwOnError:!0});var c=!1,d=this.urlHistoryActualMode;switch(b.mode){case "silent":c=
!0;break;case "none":d=N.NONE;break;case "fullreload":d=N.FULLRELOAD}var e=this._toAbusolute(a);switch(d){case N.HASH:c&&(this._silentOnce=!0);this.compareUrl(e)?this._onChange():b.replaceHistory?location.replace("#"+e):location.hash=e;break;case N.HISTORY:c&&(this._silentOnce=!0);this.compareUrl(e)||(b.replaceHistory?history.replaceState(null,null,e):history.pushState(null,null,e));this._onChange();break;case N.FULLRELOAD:this.compareUrl(e)?location.reload():b.replaceHistory?location.replace(e):
location.href=e;break;case N.NONE:this.evaluate(e)}}},stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case N.HASH:a(window).off("hashchange",this._onChange);break;case N.HISTORY:a(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;if((new D(a)).protocol)return a.length<=this._urlMaxLength;var c=this._toAbusolute(a);this.urlHistoryActualMode===N.HASH&&(c=window.location.pathname+(window.location.search||
"")+"#"+c);c=ja(c);b.writeBack&&(b.url=c,b.urlLength=c.length,b.urlMaxLength=this._urlMaxLength);return c.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){a=new D(a);var b=this._getRouterLocation();
a.isSearch()?a=b.pathname+a.search+a.hash:a.isHash()?a=b.pathname+b.search+a.hash:(a=a.pathname+a.search+a.hash,0!==a.indexOf("/")&&(a=this._getBaseDir()+a));a=ja(a);a=new D(a);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b){var c=this._getRouterLocation();b=c.pathname+c.search}0!==a.indexOf("/")&&(a=this._toAbusolute(a));0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===N.HASH&&location.hash?new D(location.hash.substring(1)):
new D(location.href)}});a.extend(D.prototype,{href:void 0,protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&!this.search&&this.hash}});D.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&new d;a.extend(F.prototype,{navigate:function(a){aa(this.__controller)||
this.__controller.trigger("sceneChangeRequest",a)},getParentContainer:function(){if(aa(this.__controller))return null;var a=m(this.__controller.rootElement);return a?R(a)[0]:null}});a.extend(function(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new l(a);this._watchChild()}.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(a){return new Q},setModal:function(a){this._isModal!=a&&(this._isModal?
(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=g.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=g.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var ra=/\x3c!--(?:\s|\S)*?--\x3e/g,ma=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,wa=/^\s*(?!\s|<)/;
a.extend(M.prototype,{onChange:function(b,c){var d=g.async.deferred();a(b).empty();a(c).appendTo(b);d.resolve();return d.promise()},onChangeStart:function(a,b,c){this._ind=g.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(a,b,c){this._ind.hide()}});var ua=null,xa={__name:"h5.scene.NotReshowableController",__init:function(b){b=b.args._notReshowableMessage;a(this.rootElement).html("\x3ch1\x3e"+b+"\x3c/h1\x3e")}},va={__name:"h5.scene.SceneContainerController",isMain:!1,
_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(b){b=b.args||{};var c=this.rootElement,d=b.isMain,e=this;this.isMain=!!d;this.followTitle=d&&b.followTitle;this.isMain&&ua&&p(100003);this._containerName=a(c).attr("data-h5-main-scene-container")||a(c).attr("data-h5-scene-container");this._currentController=null;W(c);this._transition=new M;this._transition.onChangeStart(c);this.on("{rootElement}","sceneChangeRequest",
this.own(this._onSceneChangeRequest));this._router=qa;if(this.isMain){ua=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));t=this._router.urlHistoryActualMode;this._router.start()}else z(c).done(function(a){e._currentController=a;e._transition.onChangeEnd(e.rootElement,null,a.rootElement);e._transition=null;a=e._getTitleFromCurrentScene();null!=a&&e.setTitle(a)})},__dispose:function(){aa(this._currentController)||this._currentController.dispose();this._currentController=
null;this.isMain&&(this._router.stop(),ua=this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(b){if(y(b))return this.navigate({to:b});this._navigateParam=b;b=a.extend(!0,{},b);this._transition=new M;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=
g.async.deferred();this._isNavigated=!0;var d=b.to;if(this.isMain&&b.navigationType!==U.SILENT){y(d)||p(100004,[d]);-1!==d.indexOf("#")&&p(100005,[d]);b.method===T.POST&&(this._detour.serverArgs=b.serverArgs,delete b.serverArgs);if(b.navigationType===U.ONCE||b.method===T.POST)this._detour.args=g.u.obj.deserialize(g.u.obj.serialize(b.args)),delete b.args;d=b.replaceHistory;delete b.replaceHistory;b=da(b);this._router.navigate(b,{replaceHistory:d})}else b=da(b),this._router.evaluate(b,{container:this});
return c.promise()},setTitle:function(a){this._title=a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(c,d){if(c){d=d||{};var f=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new M,this._transition.onChangeStart(this.rootElement,f));f&&e(f);var g=this,h=null;if(d.navigationType===U.ONCE||d.method===T.POST){if(!this._isNavigated){this._onNotReshowable(d);return}h=this._detour.args;delete this._detour.args}else h=d.args;
f=null;d.method===T.POST?(f=this._detour.serverArgs,delete this._detour.serverArgs):f=d.serverArgs;y(c)?L.test(c)?b(c,a("\x3cdiv\x3e\x3c/div\x3e"),h).done(function(a){g._navigateEnd(a,d)}):J(c,d.method,f).done(function(b){z(a("\x3cdiv\x3e\x3c/div\x3e").append(b),null,h).done(function(a){g._navigateEnd(a,d)})}).fail(function(a){p(100008,[c],a)}):c.__name&&L.test(c.__name)&&g._navigateEnd(c,d)}},_navigateEnd:function(b,c){var d=this,e=(this._currentController||{}).rootElement,f=b.rootElement;d._currentController=
b;var g=c&&c.title;null==g?this._navigateParam&&L.test(this._navigateParam.to)&&null!=b.sceneTitle?this.setTitle(b.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&a(e).remove();d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=!1;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var b=
this._currentController.rootElement,c=a(b).data("h5-scene-title");if(null!=c)return c;b=a(b).find("title");if(b.length)return b.text()},_onNotReshowable:function(b){if(ca.__name&&L.test(ca.__name)){var c=fa.core.controllerInternal(a("\x3cdiv\x3e\x3c/div\x3e"),ca,{_notReshowableMessage:"この画面は再表示できません。"});this._navigateEnd(c,b)}else b=y(ca)?{to:ca}:a.extend(!0,{},ca),b.args=b.args||{},b.args._notReshowableMessage="この画面は再表示できません。",this._navigate(b.to,b)},_defaultFuncForRouter:function(a){var b=this,
c=la(a),d=c.to;if(this.isMain&&this._first){if(c.navigationType===U.ONCE||c.method===T.POST){this._onNotReshowable(c);this._first=!1;return}var e=d&&L.test(d),f=t===N.HASH&&location.hash.substring(1);if(this._router.compareUrl(a)&&!f&&!e){z(this.rootElement,null,c.args).done(function(a){b._currentController=a;b._transition.onChangeEnd(b.rootElement,null,a.rootElement);b._transition=null;a=b._getTitleFromCurrentScene();null!=a&&b.setTitle(a)});this._first=!1;return}}d=d||location.pathname+location.search;
d=C(d);this._first&&(this._navigated=!0);this._navigate(d,c);this._first=!1}};fa.core.addControllerInstantiationHook(function(a){a.scene=new F(a)});a(function(){ea=g.settings.scene.clientQueryStringPrefix;G=ea.replace(/\\/g,"\\\\");ia=g.settings.scene.clientFWQueryStringPrefix;ka=ia.replace(/\\/g,"\\\\");E=g.settings.scene.urlHistoryMode;I=parseInt(g.settings.scene.urlMaxLength);ca=xa;oa=g.settings.scene.baseUrl;var b=[];g.settings.scene.routes&&(b=b.concat(g.settings.scene.routes));b=a.map(b,function(a){var b=
a.test;if(H(b))var c=b,b=function(a){var b=la(a);return c(a,b)};return{test:b,func:function(b,c){c=c||{};var d=a.navigationInfo;if(H(d))var e=la(b),d=d(b,e);if(null==d)return(c.container||ua)._defaultFuncForRouter(b),null;y(d)&&(d={to:d});return da(d)}}});b.push({test:/.*/,func:function(a,b){b=b||{};(b.container||ua)._defaultFuncForRouter(a)}});qa=new f({routes:b,urlHistoryMode:E,baseUrl:oa,urlMaxLength:I});g.settings.scene.autoInit&&Y()});g.u.obj.expose("h5.scene",{createSceneContainer:K,init:Y,
getMainSceneContainer:function(){return ua},getSceneContainers:R,getSceneContainerByName:function(a){if(null==a)return null;var b=R();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},navigationType:U,method:T,urlHistoryMode:S})})()})(jQuery);